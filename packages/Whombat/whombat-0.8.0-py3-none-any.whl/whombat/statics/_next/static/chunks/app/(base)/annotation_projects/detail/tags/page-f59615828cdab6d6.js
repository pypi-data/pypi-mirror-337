(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7415],{19401:function(e,t,n){Promise.resolve().then(n.bind(n,84897))},16463:function(e,t,n){"use strict";var a=n(71169);n.o(a,"notFound")&&n.d(t,{notFound:function(){return a.notFound}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}}),n.o(a,"useSelectedLayoutSegment")&&n.d(t,{useSelectedLayoutSegment:function(){return a.useSelectedLayoutSegment}})},84897:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n(57437),o=n(16463),s=n(2265),r=n(26364),c=n(26823),i=n(63287),u=n(90912),d=n(31234),l=n(79799),f=n(78613);function m(e){var t,n;let{annotationProject:o,onDeleteTag:s,TagSearchBar:r,tagColorFn:c}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,a.jsxs)(l.H2,{children:[(0,a.jsx)(u.Dg,{className:"inline-block mr-2 w-8 h-8 align-middle"}),"Project Tags"]}),(0,a.jsxs)("p",{className:"text-stone-500",children:[(0,a.jsx)("span",{className:"font-bold text-emerald-500",children:"Tags"})," provide meaning to annotations. View available tags for this project or add more as needed."]}),(0,a.jsx)(f.Z,{className:"mt-4",children:"You can always come back and add more tags in the future."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-y-4 gap-x-14",children:[(0,a.jsxs)("div",{className:"col-span-2 md:col-span-1",children:[(0,a.jsx)(l.H3,{children:"Add Tags"}),(0,a.jsx)("small",{className:"text-stone-500",children:"Use the search bar below to find tags for the project. Select a tag to add."}),(0,a.jsx)("div",{className:"py-2",children:r}),(0,a.jsx)("small",{className:"text-stone-500",children:"Create new tags if needed, but avoid duplicating meanings."})]}),(0,a.jsxs)("div",{className:"flex flex-col col-span-2 gap-2 md:col-span-1",children:[(0,a.jsx)(l.H3,{children:"Selected tags"}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-bold text-blue-500",children:(null!==(t=o.tags)&&void 0!==t?t:[]).length.toLocaleString()})," ","tags selected. These are available for annotators."]}),(0,a.jsx)("small",{className:"text-stone-500",children:"Use the search bar to find registered tags. Click a tag to remove it."}),(0,a.jsx)("div",{children:(0,a.jsx)(d.Z,{tags:null!==(n=o.tags)&&void 0!==n?n:[],onClick:s,tagColorFn:c})})]})]})]})}function g(e){let{annotationProject:t,onAddTag:n,onRemoveTag:o}=e,s=(0,i.Z)(e=>e.getTagColor),{data:u,removeTag:d,addTag:l}=(0,c.Z)({uuid:t.uuid,annotationProject:t,onAddTag:n,onRemoveTag:o});return(0,a.jsx)(m,{annotationProject:u||t,onDeleteTag:d.mutate,TagSearchBar:(0,a.jsx)(r.Z,{onSelectTag:l.mutate}),tagColorFn:s})}var h=n(39448),j=n(43431);function x(){let e=(0,s.useContext)(j.Z);return null==e?(0,o.notFound)():(0,a.jsx)(h.Z,{children:(0,a.jsx)(g,{annotationProject:e})})}},43431:function(e,t,n){"use strict";let a=(0,n(2265).createContext)({name:"",description:"",tags:[],created_on:new Date,uuid:""});t.Z=a},26823:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(25524),o=n(2265),s=n(88726),r=n(39527),c=n(57467);function i(e){let{uuid:t,annotationProject:n,onUpdate:i,onDelete:u,onAddTag:d,onRemoveTag:l,onAddAnnotationTasks:f,onError:m,enabled:g=!0}=e,{query:h,useMutation:j,client:x}=(0,c.ZP)({id:t,initialData:n,name:"annotation_project",enabled:g,queryFn:r.Z.annotationProjects.get,onError:m}),p=j({mutationFn:r.Z.annotationProjects.update,onSuccess:e=>{s.ZP.success("Annotation project updated"),null==i||i(e)}}),v=j({mutationFn:r.Z.annotationProjects.addTag,onSuccess:d}),w=j({mutationFn:r.Z.annotationProjects.removeTag,onSuccess:l}),Z=j({mutationFn:r.Z.annotationProjects.delete,onSuccess:u}),{data:y}=h,b=(0,o.useCallback)(async e=>{if(null==y)return;let t=await r.Z.clips.createMany(e);return await r.Z.annotationTasks.createMany(y,t)},[y]),P=(0,a.D)({mutationFn:b,onSuccess:e=>{null!=e&&(null==f||f(e),x.invalidateQueries({queryKey:["annotation_project",t]}))}}),S=(0,o.useCallback)(async()=>{await s.ZP.promise(r.Z.annotationProjects.download(t),{loading:"Downloading...",success:"Download complete",error:"Failed to download dataset"})},[t]);return{...h,update:p,addTag:v,addAnnotationTasks:P,removeTag:w,delete:Z,download:S}}},76845:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437),o=n(79803);function s(){let{text:e=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.jsxs)("div",{className:"flex flex-row justify-center items-center w-full h-full",children:[(0,a.jsx)(o.Z,{})," ",e]})}},22270:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var a=n(2265),o=n(6584);function s(e,t){let n=(0,a.useRef)([]),s=(0,o.z)(e);(0,a.useEffect)(()=>{let e=[...n.current];for(let[a,o]of t.entries())if(n.current[a]!==o){let a=s(t,e);return n.current=t,a}},[s,...t])}},47359:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});let a=[];!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){e.target instanceof HTMLElement&&e.target!==document.body&&a[0]!==e.target&&(a.unshift(e.target),(a=a.filter(e=>null!=e&&e.isConnected)).splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})})}},function(e){e.O(0,[5501,7819,5660,9772,8472,1336,5657,9226,932,6259,3215,2817,4329,6151,8026,595,9527,4593,3516,9659,2971,7023,1744],function(){return e(e.s=19401)}),_N_E=e.O()}]);