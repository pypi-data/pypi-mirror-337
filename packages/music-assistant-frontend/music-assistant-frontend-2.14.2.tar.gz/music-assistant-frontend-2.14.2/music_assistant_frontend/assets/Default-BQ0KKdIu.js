import{B as se,L as xa}from"./ListItem-Ci1hjJki.js";import{_ as Fa,s as ke,c as S,a as De,o as We,w as ie,b as Je,C as Ya,u as xe,d as gt,e as Xa,g as _e,p as ge,f as bt,h as ot,i as wt,j as Ye,t as le,k as kt,l as Pt,m as Ct,n as Ga,q as st,r as nt,v as ma,x as A,y as ja,z as It,A as be,B as m,D as ee,E as Ka,V as Xe,F as Za,T as Ja,G,H as et,I as Oe,J as Vt,K as St,L as el,M as tl,N as Ee,O as $t,P as va,Q as Y,R as C,S as d,U as y,W as $,X as ye,Y as Ge,Z as g,$ as ne,a0 as e,a1 as Be,a2 as a,a3 as Me,a4 as k,a5 as H,a6 as Zt,a7 as je,a8 as oe,a9 as P,aa as ut,ab as I,ac as al,ad as ll,ae as il,af as ol,ag as sl,ah as pa,ai as ya,aj as fa,ak as nl,al as ha,am as Z,an as U,ao as N,ap as Qt,aq as Fe,ar as J,as as at,at as mt,au as vt,av as ze,aw as ae,ax as Ve,ay as Se,az as ue,aA as ce,aB as $e,aC as lt,aD as rl,aE as ul,aF as _a,aG as dl,aH as cl,aI as ga,aJ as ml,aK as ba,aL as vl,aM as pl,aN as wa,aO as yl,aP as fl,aQ as hl,aR as _l,aS as gl,aT as bl,aU as Jt,aV as wl,aW as kl,aX as it,aY as Pl,aZ as tt,a_ as Ke,a$ as pt,b0 as Ue,b1 as Te,b2 as Tt,b3 as ka,b4 as rt,b5 as ea,b6 as Cl,b7 as Pa,b8 as Ca,b9 as Il,ba as Vl,bb as ta,bc as aa,bd as Sl,be as yt,bf as dt,bg as Ia,bh as $l,bi as Ql,bj as Tl}from"./index-CcCHt9di.js";import{D as Ml}from"./constants-BXWEQHoz.js";import{u as Mt,m as Bt,a as Bl,c as El,b as Al}from"./layout-PtrSI5Mb.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Re}from"./MediaItemThumb-Dg0gTiNC.js";import{T as Ll,V as ft}from"./Toolbar-CsiGXKRm.js";import{V as Va}from"./VDialog-rC4alV5k.js";import{V as ql,a as zl}from"./VInfiniteScroll-C8xpj0RM.js";import{V as Rl,a as Qe,m as Dl,b as Wl}from"./VBtn-DAIDoEvo.js";import{V as Sa}from"./VSlider-BrANrzLE.js";import{M as pe,a as ht}from"./marquee_text_sync-BmvihHS1.js";import{V as Ol}from"./VToolbar-z4Ht7lz9.js";import{V as Nl}from"./VVirtualScroll-CQFKQKaZ.js";import{V as Hl}from"./VCheckbox-C-VhILeP.js";import{V as Ul,a as la,b as ia,c as oa}from"./VExpansionPanels-CZszfsSI.js";import"./VCheckboxBtn-BSmiUf2Q.js";const xl=de(Fa,[["__scopeId","data-v-f0157380"]]),Fl=""+new URL("icon-BQHr-CTb.png",import.meta.url).href;function Yl(t){let{rootEl:i,isSticky:s,layoutItemStyles:o}=t;const n=ke(!1),l=ke(0),r=S(()=>{const v=typeof n.value=="boolean"?"top":n.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,n.value?{[v]:De(l.value)}:{top:o.value.top}]});We(()=>{ie(s,v=>{v?window.addEventListener("scroll",u,{passive:!0}):window.removeEventListener("scroll",u)},{immediate:!0})}),Je(()=>{window.removeEventListener("scroll",u)});let c=0;function u(){const v=c>window.scrollY?"up":"down",f=i.value.getBoundingClientRect(),h=parseFloat(o.value.top??0),p=window.scrollY-Math.max(0,l.value-h),_=f.height+Math.max(l.value,h)-window.scrollY-window.innerHeight,w=parseFloat(getComputedStyle(i.value).getPropertyValue("--v-body-scroll-y"))||0;f.height<window.innerHeight-h?(n.value="top",l.value=h):v==="up"&&n.value==="bottom"||v==="down"&&n.value==="top"?(l.value=window.scrollY+f.top-w,n.value=!0):v==="down"&&_<=0?(l.value=0,n.value="bottom"):v==="up"&&p<=0&&(w?n.value!=="top"&&(l.value=-p+w+h,n.value="top"):(l.value=f.top+p,n.value="top")),c=window.scrollY}return{isStuck:n,stickyStyles:r}}const Xl=100,Gl=20;function sa(t){return(t<0?-1:1)*Math.sqrt(Math.abs(t))*1.41421356237}function na(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let i=0;for(let s=t.length-1;s>0;s--){if(t[s].t===t[s-1].t)continue;const o=sa(i),n=(t[s].d-t[s-1].d)/(t[s].t-t[s-1].t);i+=(n-o)*Math.abs(n),s===t.length-1&&(i*=.5)}return sa(i)*1e3}function jl(){const t={};function i(n){Array.from(n.changedTouches).forEach(l=>{(t[l.identifier]??(t[l.identifier]=new Ya(Gl))).push([n.timeStamp,l])})}function s(n){Array.from(n.changedTouches).forEach(l=>{delete t[l.identifier]})}function o(n){var v;const l=(v=t[n])==null?void 0:v.values().reverse();if(!l)throw new Error(`No samples for touch id ${n}`);const r=l[0],c=[],u=[];for(const f of l){if(r[0]-f[0]>Xl)break;c.push({t:f[0],d:f[1].clientX}),u.push({t:f[0],d:f[1].clientY})}return{x:na(c),y:na(u),get direction(){const{x:f,y:h}=this,[p,_]=[Math.abs(f),Math.abs(h)];return p>_&&f>=0?"right":p>_&&f<=0?"left":_>p&&h>=0?"down":_>p&&h<=0?"up":Kl()}}}return{addMovement:i,endTouch:s,getVelocity:o}}function Kl(){throw new Error}function Zl(t){let{el:i,isActive:s,isTemporary:o,width:n,touchless:l,position:r}=t;We(()=>{window.addEventListener("touchstart",D,{passive:!0}),window.addEventListener("touchmove",F,{passive:!1}),window.addEventListener("touchend",q,{passive:!0})}),Je(()=>{window.removeEventListener("touchstart",D),window.removeEventListener("touchmove",F),window.removeEventListener("touchend",q)});const c=S(()=>["left","right"].includes(r.value)),{addMovement:u,endTouch:v,getVelocity:f}=jl();let h=!1;const p=ke(!1),_=ke(0),w=ke(0);let T;function L(M,B){return(r.value==="left"?M:r.value==="right"?document.documentElement.clientWidth-M:r.value==="top"?M:r.value==="bottom"?document.documentElement.clientHeight-M:qe())-(B?n.value:0)}function E(M){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const z=r.value==="left"?(M-w.value)/n.value:r.value==="right"?(document.documentElement.clientWidth-M-w.value)/n.value:r.value==="top"?(M-w.value)/n.value:r.value==="bottom"?(document.documentElement.clientHeight-M-w.value)/n.value:qe();return B?Math.max(0,Math.min(1,z)):z}function D(M){if(l.value)return;const B=M.changedTouches[0].clientX,z=M.changedTouches[0].clientY,O=25,V=r.value==="left"?B<O:r.value==="right"?B>document.documentElement.clientWidth-O:r.value==="top"?z<O:r.value==="bottom"?z>document.documentElement.clientHeight-O:qe(),b=s.value&&(r.value==="left"?B<n.value:r.value==="right"?B>document.documentElement.clientWidth-n.value:r.value==="top"?z<n.value:r.value==="bottom"?z>document.documentElement.clientHeight-n.value:qe());(V||b||s.value&&o.value)&&(T=[B,z],w.value=L(c.value?B:z,s.value),_.value=E(c.value?B:z),h=w.value>-20&&w.value<80,v(M),u(M))}function F(M){const B=M.changedTouches[0].clientX,z=M.changedTouches[0].clientY;if(h){if(!M.cancelable){h=!1;return}const V=Math.abs(B-T[0]),b=Math.abs(z-T[1]);(c.value?V>b&&V>3:b>V&&b>3)?(p.value=!0,h=!1):(c.value?b:V)>3&&(h=!1)}if(!p.value)return;M.preventDefault(),u(M);const O=E(c.value?B:z,!1);_.value=Math.max(0,Math.min(1,O)),O>1?w.value=L(c.value?B:z,!0):O<0&&(w.value=L(c.value?B:z,!1))}function q(M){if(h=!1,!p.value)return;u(M),p.value=!1;const B=f(M.changedTouches[0].identifier),z=Math.abs(B.x),O=Math.abs(B.y);(c.value?z>O&&z>400:O>z&&O>3)?s.value=B.direction===({left:"right",right:"left",top:"down",bottom:"up"}[r.value]||qe()):s.value=_.value>.5}const W=S(()=>p.value?{transform:r.value==="left"?`translateX(calc(-100% + ${_.value*n.value}px))`:r.value==="right"?`translateX(calc(100% - ${_.value*n.value}px))`:r.value==="top"?`translateY(calc(-100% + ${_.value*n.value}px))`:r.value==="bottom"?`translateY(calc(100% - ${_.value*n.value}px))`:qe(),transition:"none"}:void 0);return xe(p,()=>{var z,O;const M=((z=i.value)==null?void 0:z.style.transform)??null,B=((O=i.value)==null?void 0:O.style.transition)??null;gt(()=>{var V,b,R,x;(b=i.value)==null||b.style.setProperty("transform",((V=W.value)==null?void 0:V.transform)||"none"),(x=i.value)==null||x.style.setProperty("transition",((R=W.value)==null?void 0:R.transition)||null)}),Xa(()=>{var V,b;(V=i.value)==null||V.style.setProperty("transform",M),(b=i.value)==null||b.style.setProperty("transition",B)})}),{isDragging:p,dragProgress:_,dragStyles:W}}function qe(){throw new Error}const Jl=["start","end","left","right","top","bottom"],ei=ge({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>Jl.includes(t)},sticky:Boolean,...$t(),...Ee(),...tl(),...el({mobile:null}),...St(),...Bt(),...Vt(),...Oe({tag:"nav"}),...et()},"VNavigationDrawer"),$a=_e()({name:"VNavigationDrawer",props:ei(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,i){let{attrs:s,emit:o,slots:n}=i;const{isRtl:l}=bt(),{themeClasses:r}=ot(t),{borderClasses:c}=wt(t),{backgroundColorClasses:u,backgroundColorStyles:v}=Ye(le(t,"color")),{elevationClasses:f}=kt(t),{displayClasses:h,mobile:p}=Pt(t),{roundedClasses:_}=Ct(t),w=Ga(),T=st(t,"modelValue",null,X=>!!X),{ssrBootStyles:L}=nt(),{scopeId:E}=ma(),D=A(),F=ke(!1),{runOpenDelay:q,runCloseDelay:W}=Ka(t,X=>{F.value=X}),M=S(()=>t.rail&&t.expandOnHover&&F.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),B=S(()=>ja(t.location,l.value)),z=S(()=>t.persistent),O=S(()=>!t.permanent&&(p.value||t.temporary)),V=S(()=>t.sticky&&!O.value&&B.value!=="bottom");xe(()=>t.expandOnHover&&t.rail!=null,()=>{ie(F,X=>o("update:rail",!X))}),xe(()=>!t.disableResizeWatcher,()=>{ie(O,X=>!t.permanent&&va(()=>T.value=!X))}),xe(()=>!t.disableRouteWatcher&&!!w,()=>{ie(w.currentRoute,()=>O.value&&(T.value=!1))}),ie(()=>t.permanent,X=>{X&&(T.value=!0)}),t.modelValue==null&&!O.value&&(T.value=t.permanent||!p.value);const{isDragging:b,dragProgress:R}=Zl({el:D,isActive:T,isTemporary:O,width:M,touchless:le(t,"touchless"),position:B}),x=S(()=>{const X=O.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):M.value;return b.value?X*R.value:X}),{layoutItemStyles:te,layoutItemScrimStyles:j}=Mt({id:t.name,order:S(()=>parseInt(t.order,10)),position:B,layoutSize:x,elementSize:M,active:S(()=>T.value||b.value),disableTransitions:S(()=>b.value),absolute:S(()=>t.absolute||V.value&&typeof re.value!="string")}),{isStuck:re,stickyStyles:we}=Yl({rootEl:D,isSticky:V,layoutItemStyles:te}),fe=Ye(S(()=>typeof t.scrim=="string"?t.scrim:null)),he=S(()=>({...b.value?{opacity:R.value*.2,transition:"none"}:void 0,...j.value}));return It({VList:{bgColor:"transparent"}}),be(()=>{const X=n.image||t.image;return m(G,null,[m(t.tag,ee({ref:D,onMouseenter:q,onMouseleave:W,class:["v-navigation-drawer",`v-navigation-drawer--${B.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":F.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":O.value,"v-navigation-drawer--persistent":z.value,"v-navigation-drawer--active":T.value,"v-navigation-drawer--sticky":V.value},r.value,u.value,c.value,h.value,f.value,_.value,t.class],style:[v.value,te.value,L.value,we.value,t.style]},E,s),{default:()=>{var Pe,Ne,He;return[X&&m("div",{key:"image",class:"v-navigation-drawer__img"},[n.image?m(Za,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:t.image}}},n.image):m(Xe,{key:"image-img",alt:"",cover:!0,height:"inherit",src:t.image},null)]),n.prepend&&m("div",{class:"v-navigation-drawer__prepend"},[(Pe=n.prepend)==null?void 0:Pe.call(n)]),m("div",{class:"v-navigation-drawer__content"},[(Ne=n.default)==null?void 0:Ne.call(n)]),n.append&&m("div",{class:"v-navigation-drawer__append"},[(He=n.append)==null?void 0:He.call(n)])]}}),m(Ja,{name:"fade-transition"},{default:()=>[O.value&&(b.value||T.value)&&!!t.scrim&&m("div",ee({class:["v-navigation-drawer__scrim",fe.backgroundColorClasses.value],style:[he.value,fe.backgroundColorStyles.value],onClick:()=>{z.value||(T.value=!1)}},E),null)]})])}),{isStuck:re}}}),Qa=function(){const t=localStorage.getItem("frontend.settings.menu_items"),i=t?t.split(","):Ml,s=[];for(const o of i)o==="home"&&s.push({label:"home",icon:"mdi-home-outline",path:"/home",isLibraryNode:!1}),o==="search"&&s.push({label:"search",icon:"mdi-magnify",path:"/search",isLibraryNode:!1}),o==="artists"&&s.push({label:"artists",icon:"mdi-account-outline",path:"/artists",isLibraryNode:!0,hidden:a.libraryArtistsCount===0}),o==="albums"&&s.push({label:"albums",icon:"mdi-album",path:"/albums",isLibraryNode:!0,hidden:a.libraryAlbumsCount===0}),o==="tracks"&&s.push({label:"tracks",icon:"mdi-music-note",path:"/tracks",isLibraryNode:!0,hidden:a.libraryTracksCount===0}),o==="playlists"&&s.push({label:"playlists",icon:"mdi-playlist-play",path:"/playlists",isLibraryNode:!0,hidden:a.libraryPlaylistsCount===0}),o==="podcasts"&&s.push({label:"podcasts",icon:"mdi-podcast",path:"/podcasts",isLibraryNode:!0,hidden:a.libraryPodcastsCount===0}),o==="audiobooks"&&s.push({label:"audiobooks",icon:"mdi-book-play-outline",path:"/audiobooks",isLibraryNode:!0,hidden:a.libraryAudiobooksCount===0}),o==="radios"&&s.push({label:"radios",icon:"mdi-access-point",path:"/radios",isLibraryNode:!0,hidden:a.libraryRadiosCount===0}),o==="browse"&&s.push({label:"browse",icon:"mdi-folder-outline",path:"/browse",isLibraryNode:!0}),o==="settings"&&s.push({label:"settings.settings",icon:"mdi-cog-outline",path:"/settings",isLibraryNode:!0});return s},ti=Y({__name:"DrawerNavigation",setup(t){const i=A(localStorage.getItem("show_navigation_menu")==="true"),s=Qa();return ie(()=>i.value,o=>{localStorage.setItem("show_navigation_menu",o.toString())}),(o,n)=>(d(),C($a,{app:"",rail:!i.value,width:280,permanent:""},{default:y(()=>[m(ye,{style:{height:"55px"},active:!1},{prepend:y(()=>n[1]||(n[1]=[$("img",{class:"logo_icon",size:"40",src:Fl},null,-1)])),title:y(()=>n[2]||(n[2]=[$("div",{class:"logo_text"},"Music Assistant",-1)])),_:1}),m(Ge),m(Be,{lines:"one",density:"compact",nav:""},{default:y(()=>[(d(!0),g(G,null,ne(e(s).filter(l=>!l.hidden),l=>(d(),C(ye,{key:l.path,nav:"",density:"compact",height:15,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1}),m(se,{nav:"",height:15,width:40,style:{position:"relative",float:"right",right:"10px",top:"20px"},ripple:!1,icon:i.value?"mdi-chevron-left":"mdi-chevron-right",title:o.$t("tooltip.show_menu"),onClick:n[0]||(n[0]=l=>i.value=!i.value)},null,8,["icon","title"])]),_:1},8,["rail"]))}}),ai=de(ti,[["__scopeId","data-v-3b429b32"]]),li={class:"media-thumb"},ii={style:{"margin-left":"-10px","padding-right":"5px"}},oi=Y({__name:"AddToPlaylistDialog",setup(t){const i=A(!1),s=A([]),o=A([]),n=A(),l=A([]);We(()=>{Me.on("playlistdialog",async f=>{i.value=!0,l.value=f.items,n.value=f.parentItem,await r()}),Je(()=>{Me.off("playlistdialog")})});const r=async function(){s.value=[],o.value=[];const f=await k.getLibraryPlaylists();let h=l.value.length?l.value[0]:void 0;if(h){"provider_mappings"in h||(h=await k.getItem(h.media_type,h.item_id,h.provider));for(const p of f){if(!p.provider_mappings.filter(w=>w.available).length||!p.is_editable||n.value&&n.value.media_type===H.PLAYLIST&&p.item_id===n.value.item_id)continue;const _=k.providers[p.provider_mappings[0].provider_instance];_&&(_.domain=="builtin"||_.is_streaming_provider||h!=null&&h.provider_mappings.filter(w=>w.provider_instance==_.instance_id).length)&&s.value.push(p)}for(const p of Object.values(k.providers))p.supported_features.includes(Zt.PLAYLIST_CREATE)&&p.supported_features.includes(Zt.PLAYLIST_TRACKS_EDIT)&&(p.domain=="builtin"||p.is_streaming_provider||h!=null&&h.provider_mappings.filter(_=>_.provider_instance==p.instance_id).length)&&o.value.push(p.instance_id)}},c=async function(f){k.addPlaylistTracks(f.item_id,l.value.map(h=>h.uri)),v(),a.activeAlert={type:al.INFO,message:oe("background_task_added"),persistent:!1}},u=async function(f){const h=prompt(oe("new_playlist_name"));if(!h)return;const p=await k.createPlaylist(h,f);c(p)},v=function(){i.value=!1};return(f,h)=>(d(),C(Va,{modelValue:i.value,"onUpdate:modelValue":[h[0]||(h[0]=p=>i.value=p),h[1]||(h[1]=p=>{e(a).dialogActive=p})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[m(je,null,{default:y(()=>[m(Ll,{icon:"mdi-playlist-plus",title:e(oe)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:v}]},null,8,["title","menu-items"]),m(Ge),h[4]||(h[4]=$("br",null,null,-1)),m(Be,null,{default:y(()=>[(d(!0),g(G,null,ne(s.value,p=>(d(),g("div",{key:p.item_id},[m(ye,{onClick:_=>c(p)},{prepend:y(()=>[$("div",li,[m(Re,{item:p,size:50},null,8,["item"])])]),title:y(()=>[$("div",null,I(p.name),1)]),subtitle:y(()=>[$("div",null,I(p.owner),1)]),append:y(()=>[p.provider_mappings?(d(),C(ut,{key:0,domain:p.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):P("",!0)]),_:2},1032,["onClick"])]))),128)),h[2]||(h[2]=$("div",{style:{height:"30px"}},null,-1)),m(Ge),h[3]||(h[3]=$("div",{style:{height:"30px"}},null,-1)),(d(!0),g(G,null,ne(o.value,p=>(d(),g("div",{key:p},[m(ye,{onClick:_=>u(p)},{prepend:y(()=>[$("div",ii,[m(ut,{domain:e(k).providers[p].domain,size:50},null,8,["domain"])])]),title:y(()=>[$("div",null,I(e(oe)("new_playlist")),1)]),subtitle:y(()=>[$("div",null,I(e(oe)("create_playlist_on",[e(k).providers[p].name])),1)]),append:y(()=>[m(ut,{domain:e(k).providers[p].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),si=de(oi,[["__scopeId","data-v-bd014719"]]),ni=ge({scrollable:Boolean,...Ee(),...il(),...Oe({tag:"main"})},"VMain"),ri=_e()({name:"VMain",props:ni(),setup(t,i){let{slots:s}=i;const{dimensionStyles:o}=ll(t),{mainStyles:n}=Bl(),{ssrBootStyles:l}=nt();return be(()=>m(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[n.value,l.value,o.value,t.style]},{default:()=>{var r,c;return[t.scrollable?m("div",{class:"v-main__scroller"},[(r=s.default)==null?void 0:r.call(s)]):(c=s.default)==null?void 0:c.call(s)]}})),{}}}),ra=Y({__name:"View",setup(t){return(i,s)=>{const o=sl("router-view");return d(),C(ri,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:y(()=>{var n,l,r;return[e(a).navigationMenuStyle=="vertical"&&!e(a).frameless?(d(),C(ai,{key:0})):P("",!0),m(o,null,{default:y(({Component:c})=>[(d(),C(ol(c)))]),_:1}),m(si),m(xl),m(ql,{"model-value":e(a).activeAlert!==void 0,color:((n=e(a).activeAlert)==null?void 0:n.type)||"grey",text:(l=e(a).activeAlert)==null?void 0:l.message,"close-on-content-click":"",position:"sticky",timeout:(r=e(a).activeAlert)!=null&&r.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(a).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),ui=ge({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...$t(),...Ee(),...ha(),...St(),...Vt(),...Bt({name:"bottom-navigation"}),...Oe({tag:"header"}),...nl({selectedClass:"v-btn--selected"}),...et()},"VBottomNavigation"),di=_e()({name:"VBottomNavigation",props:ui(),emits:{"update:active":t=>!0,"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=pa(),{borderClasses:n}=wt(t),{backgroundColorClasses:l,backgroundColorStyles:r}=Ye(le(t,"bgColor")),{densityClasses:c}=ya(t),{elevationClasses:u}=kt(t),{roundedClasses:v}=Ct(t),{ssrBootStyles:f}=nt(),h=S(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),p=st(t,"active",t.active),{layoutItemStyles:_}=Mt({id:t.name,order:S(()=>parseInt(t.order,10)),position:S(()=>"bottom"),layoutSize:S(()=>p.value?h.value:0),elementSize:h,active:p,absolute:le(t,"absolute")});return fa(t,Rl),It({VBtn:{baseColor:le(t,"baseColor"),color:le(t,"color"),density:le(t,"density"),stacked:S(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),be(()=>m(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":p.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},o.value,l.value,n.value,c.value,u.value,v.value,t.class],style:[r.value,_.value,{height:De(h.value)},f.value,t.style]},{default:()=>[s.default&&m("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),ci={class:"menuButton"},mi={class:"menuButton"},vi={class:"menuButton"},pi=Y({__name:"BottomNavigation",props:{height:{}},setup(t){const i=Qa(),s=A(!1);return(o,n)=>(d(),C(di,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"},role:"navigation"},{default:y(()=>[e(Z)("tablet")?(d(!0),g(G,{key:0},ne(e(i),l=>(d(),C(Qe,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[m(U,{size:"xx-large"},{default:y(()=>[N(I(l.icon),1)]),_:2},1024),$("span",ci,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)):(d(),g(G,{key:1},[(d(!0),g(G,null,ne(e(i).filter(l=>!l.isLibraryNode),l=>(d(),C(Qe,{key:l.label,to:l.path,"aria-label":o.$t(l.label),tabindex:"0"},{default:y(()=>[m(U,{size:"xx-large"},{default:y(()=>[N(I(l.icon),1)]),_:2},1024),$("span",mi,I(o.$t(l.label)),1)]),_:2},1032,["to","aria-label"]))),128)),m(Qt,null,{activator:y(({props:l})=>[m(Qe,ee(l,{"aria-haspopup":"true","aria-expanded":s.value.toString(),"aria-label":"Open library menu"}),{default:y(()=>[m(U,{size:"xx-large"},{default:y(()=>n[0]||(n[0]=[N("mdi-bookshelf")])),_:1}),$("span",vi,I(o.$t("library")),1)]),_:2},1040,["aria-expanded"])]),default:y(()=>[m(Be,null,{default:y(()=>[(d(!0),g(G,null,ne(e(i).filter(l=>l.isLibraryNode),l=>(d(),C(ye,{key:l.label,title:o.$t(l.label),"prepend-icon":l.icon,to:l.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})],64))]),_:1},8,["height"]))}}),yi=de(pi,[["__scopeId","data-v-5c8e33d1"]]),fi={style:{width:"auto"}},hi={key:0,style:{width:"100%"}},_i=["onClick"],gi={key:0,class:"time-text-row"},bi={class:"text-caption time-text-right"},wi=Y({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1},color:{default:void 0}},setup(t){const i=A(!1),s=A(!0),o=A(!1),n=A(0),l=A(0),r=S(()=>a.curQueueItem?i.value?`-${Fe(a.curQueueItem.duration-u.value)}`:`${Fe(u.value)}`:"0:00"),c=S(()=>{var w;if(!a.curQueueItem||!a.curQueueItem.duration||((w=a.curQueueItem.media_item)==null?void 0:w.media_type)==H.RADIO)return"";const _=a.curQueueItem.duration;return Fe(_)}),u=S(()=>o.value?(l.value=n.value,n.value):a.activePlayerQueue?a.activePlayerQueue.elapsed_time:0),v=S(()=>{var w,T,L;const _={};return(L=(T=(w=a.curQueueItem)==null?void 0:w.media_item)==null?void 0:T.metadata)!=null&&L.chapters&&a.curQueueItem.media_item.metadata.chapters.forEach(E=>{_[E.start]=E.name}),_});ie(u,_=>{o.value||(n.value=_)});const f=function(){o.value=!0},h=()=>{o.value=!1,!o.value&&a.activePlayer&&k.playerCommandSeek(a.activePlayer.player_id,Math.round(l.value))},p=function(_){var w,T,L;if((L=(T=(w=a.curQueueItem)==null?void 0:w.media_item)==null?void 0:T.metadata)!=null&&L.chapters){for(const E of a.curQueueItem.media_item.metadata.chapters)if(E.start==_){k.playMedia(a.curQueueItem.media_item.uri,void 0,void 0,E.position.toString());return}}};return(_,w)=>{var T,L;return d(),g("div",fi,[e(a).activePlayerQueue?(d(),g("div",hi,[m(Sa,{modelValue:n.value,"onUpdate:modelValue":w[0]||(w[0]=E=>n.value=E),disabled:!e(a).curQueueItem||!e(a).curQueueItem.media_item||!e(a).curQueueItem.duration||e(a).curQueueItem.media_item.media_type==e(H).RADIO||((T=e(a).activePlayer)==null?void 0:T.powered)==!1,style:{width:"100%"},min:0,max:(L=e(a).curQueueItem)==null?void 0:L.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,"show-ticks":v.value?"always":!1,ticks:v.value,"tick-size":"4",color:_.color,onTouchstart:w[1]||(w[1]=E=>s.value=!1),onTouchend:w[2]||(w[2]=E=>s.value=!0),onMouseenter:w[3]||(w[3]=E=>s.value=!1),onMouseleave:w[4]||(w[4]=E=>s.value=!0),onStart:f,onEnd:h},{"tick-label":y(({tick:E})=>[_.showLabels&&!s.value&&Object.values(v.value).length<6?(d(),g("a",{key:0,class:"text-caption",onClick:D=>p(E.value)},I(E.label),9,_i)):P("",!0)]),_:1},8,["modelValue","disabled","max","thumb-size","show-ticks","ticks","color"]),_.showLabels?(d(),g("div",gi,[$("div",{class:"text-caption time-text-left",onClick:w[5]||(w[5]=E=>i.value?i.value=!1:i.value=!0)},I(r.value),1),$("div",bi,I(c.value),1)])):P("",!0)])):P("",!0)])}}}),Ta=de(wi,[["__scopeId","data-v-5386447e"]]),ki=Y({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(t,{emit:i}){const s=()=>{if(o.value){const l=o.value.offsetWidth,r=o.value.offsetHeight,c=Math.min(l,r);n.value.$el.style.fontSize=`${c}px`}},o=A(),n=A();return We(()=>{s(),window.addEventListener("resize",s)}),Je(()=>{window.removeEventListener("resize",s)}),(l,r)=>(d(),g("div",{ref_key:"responsiveIconHolder",ref:o,class:at([l.type=="btn"&&!l.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:J({width:l.staticWidth?l.staticWidth:l.width,height:l.staticWidth?l.staticWidth:l.height,maxHeight:l.staticHeight?l.staticHeight:l.maxHeight,maxWidth:l.staticWidth?l.staticWidth:l.maxWidth,minHeight:l.staticHeight?l.staticHeight:l.minHeight,minWidth:l.staticWidth?l.staticWidth:l.minWidth}),onClick:r[0]||(r[0]=c=>l.disabled?c.preventDefault():l.$emit("click",c))},[m(ft,{"model-value":l.badge==!0,color:"error",dot:""},{default:y(()=>[l.type==="icon"?(d(),C(U,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},mt({_:2},[ne(l.$slots,(c,u)=>({name:u,fn:y(()=>[vt(l.$slots,u,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):l.type==="btn"?(d(),C(U,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:l.color?l.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:l.disabled},mt({_:2},[ne(l.$slots,(c,u)=>({name:u,fn:y(()=>[vt(l.$slots,u,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):P("",!0)]),_:3},8,["model-value"])],6))}}),Ae=de(ki,[["__scopeId","data-v-2c9253ab"]]),Ma=Y({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Ae,ee({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(ze)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.repeat_mode==e(ae).OFF,null],[i.playerQueue.repeat_mode==e(ae).ALL,"primary"],[i.playerQueue.repeat_mode==e(ae).ONE,"primary"]]),icon:e(ze)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.repeat_mode==e(ae).OFF,"mdi-repeat-off"],[i.playerQueue.repeat_mode==e(ae).ALL,"mdi-repeat"],[i.playerQueue.repeat_mode==e(ae).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(k).queueCommandRepeat(i.playerQueue.queue_id||"",e(ze)(null,[[i.playerQueue.repeat_mode==e(ae).OFF,e(ae).ONE],[i.playerQueue.repeat_mode==e(ae).ALL,e(ae).OFF],[i.playerQueue.repeat_mode==e(ae).ONE,e(ae).ALL]])))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Ba=Y({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){return(i,s)=>{var o,n;return i.isVisible&&i.playerQueue?(d(),C(Ae,ee({key:0},i.icon,{disabled:!i.playerQueue.active||i.playerQueue.items==0,color:e(ze)((o=i.icon)==null?void 0:o.color,[[i.playerQueue.shuffle_enabled,"primary",""]]),icon:e(ze)((n=i.icon)==null?void 0:n.icon,[[i.playerQueue.shuffle_enabled,"mdi-shuffle"],[i.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=l=>e(k).queueCommandShuffle(i.playerQueue.queue_id,!i.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):P("",!0)}}}),Ea=Y({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(t){const i=t,s=S(()=>i.playerQueue?i.playerQueue.items>0:!1),o=S(()=>{var l;return!(!i.player||(l=i.playerQueue)!=null&&l.active||!i.player.current_media)}),n=S(()=>{var l;return((l=i.player)==null?void 0:l.state)==Ve.PLAYING?"mdi-pause":"mdi-play"});return(l,r)=>l.isVisible&&l.player?(d(),C(Ae,ee({key:0},l.icon,{disabled:!s.value&&!o.value,icon:l.iconStyle?`${n.value}-${l.iconStyle}`:n.value,type:"btn",onClick:r[0]||(r[0]=c=>e(k).playerCommandPlayPause(l.player.player_id))}),null,16,["disabled","icon"])):P("",!0)}}),Aa=Y({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=S(()=>{var n,l;return!((n=i.playerQueue)!=null&&n.active)||!((l=i.playerQueue)!=null&&l.items)||!i.playerQueue.current_index?!1:i.playerQueue.current_index>0}),o=S(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes(Se.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Ae,ee({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:l[0]||(l[0]=r=>e(k).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),La=Y({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=t,s=S(()=>{var n;return(n=i.playerQueue)!=null&&n.active?(i.playerQueue.current_index||0)<i.playerQueue.items-1:!1}),o=S(()=>{var n;return!i.player||(n=i.playerQueue)!=null&&n.active||!i.player.current_media?!1:i.player.supported_features.includes(Se.NEXT_PREVIOUS)});return(n,l)=>n.isVisible&&n.player?(d(),C(Ae,ee({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:l[0]||(l[0]=r=>e(k).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):P("",!0)}}),Pi={key:0,class:"player-controls"},Ci={key:0,class:"player-controls-elements"},Ii={key:1,class:"player-controls-elements"},Vi={key:2},Si={key:3,class:"player-controls-elements"},$i={key:4,class:"player-controls-elements"},ua=Y({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(t){return(i,s)=>{var o,n,l,r,c;return i.visibleComponents?(d(),g("div",Pi,[i.visibleComponents&&((o=i.visibleComponents.shuffle)!=null&&o.isVisible)?(d(),g("div",Ci,[m(Ba,{"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):P("",!0),i.visibleComponents&&((n=i.visibleComponents.previous)!=null&&n.isVisible)?(d(),g("div",Ii,[m(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item",icon:i.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((l=i.visibleComponents.play)!=null&&l.isVisible)?(d(),g("div",Vi,[m(Ea,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","icon-style":i.visibleComponents.play.withCircle?"circle":"",icon:i.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):P("",!0),i.visibleComponents&&((r=i.visibleComponents.next)!=null&&r.isVisible)?(d(),g("div",Si,[m(La,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):P("",!0),i.visibleComponents&&((c=i.visibleComponents.repeat)!=null&&c.isVisible)?(d(),g("div",$i,[m(Ma,{"player-queue":e(a).activePlayerQueue,icon:i.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):P("",!0)])):P("",!0)}}}),Qi={props:{width:String,height:String,style:String,allowWheel:Boolean},emits:["update:model-value"],setup(t,i){const s=A(!0),o=S(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${t.width}; height:${t.height}; display: inline-grid; ${t.style}`})),n=S(()=>({...o.value,...i}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:r})=>{if(!t.allowWheel)return;const c=n.value.step,u=i.attrs["model-value"],v=r<0?c:-c;i.emit("update:model-value",u+v)}}}};function Ti(t,i,s,o,n,l){return d(),C(Sa,ee(o.playerVolumeProps,{onTouchstart:i[0]||(i[0]=r=>o.isThumbHidden=!1),onTouchend:i[1]||(i[1]=r=>o.isThumbHidden=!0),onMouseenter:i[2]||(i[2]=r=>o.isThumbHidden=!1),onMouseleave:i[3]||(i[3]=r=>o.isThumbHidden=!0),onWheel:ue(o.onWheel,["prevent"]),onEnd:i[4]||(i[4]=r=>t.$emit("update:model-value",r))}),mt({_:2},[ne(t.$slots,(r,c)=>({name:c,fn:y(()=>[vt(t.$slots,c,{},void 0,!0)])}))]),1040,["onWheel"])}const Ze=de(Qi,[["render",Ti],["__scopeId","data-v-af51e13c"]]),qa=Y({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(t){const i=function(){a.showFullscreenPlayer&&a.showQueueItems?a.showQueueItems=!1:a.showFullscreenPlayer&&!a.showQueueItems?a.showQueueItems=!0:(a.showQueueItems=!0,a.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(d(),C(Ae,ee({key:0},s.icon,{disabled:!e(a).activePlayerId||e(a).showFullscreenPlayer&&!e(a).curQueueItem&&!e(a).showQueueItems,icon:"mdi-playlist-play",color:e(ze)((n=s.icon)==null?void 0:n.color,[[e(a).showFullscreenPlayer&&e(a).showQueueItems,"primary",""]]),type:"btn",onClick:i}),null,16,["disabled","color"])):P("",!0)}}}),za=Y({__name:"SpeakerBtn",props:{color:{}},setup(t){return(i,s)=>(d(),C(se,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(a).showPlayersMenu=!0)},{default:y(()=>{var o;return[m(U,{color:i.color?i.color:"",size:24,icon:(o=e(a).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),Ra=(t,i)=>{const s=[];(t==null?void 0:t.power_control)!=ce&&s.push({label:t.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{k.playerCommandPowerToggle(t.player_id)},icon:"mdi-power"}),((t==null?void 0:t.state)=="playing"||(t==null?void 0:t.state)=="paused")&&s.push({label:"stop_playback",labelArgs:[],action:()=>{k.playerCommandStop(t.player_id)},icon:"mdi-stop"});const o=Object.values(k.players).filter(l=>l.player_id!=t.player_id&&l.available&&l.enabled&&(l.can_group_with.includes(t.provider)||l.can_group_with.includes(t.player_id))&&l.supported_features.includes(Se.SET_MEMBERS)&&!l.synced_to);t.supported_features.includes(Se.SET_MEMBERS)&&!t.synced_to&&t.type==$e.PLAYER&&t.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(l=>({label:l.display_name,labelArgs:[],action:()=>{k.playerCommandGroup(t.player_id,l.player_id)}})).sort((l,r)=>{var c;return l.label.toUpperCase()>((c=r.label)==null?void 0:c.toUpperCase())?1:-1})}),i&&s.push({label:i.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{k.queueCommandShuffleToggle(i.queue_id)},icon:i.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),i&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,ae.OFF)},selected:i.repeat_mode==ae.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,ae.ALL)},selected:i.repeat_mode==ae.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{k.queueCommandRepeat(i.queue_id,ae.ONE)},selected:i.repeat_mode==ae.ONE}],icon:"mdi-repeat"}),i!=null&&i.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(k.players).filter(l=>l.player_id!=i.queue_id&&l.player_id!=t.player_id&&l.available&&l.enabled&&!l.synced_to).map(l=>({label:l.display_name,labelArgs:[],action:()=>{k.queueCommandTransfer(i.queue_id,l.player_id),a.activePlayerId=l.player_id}})).sort((l,r)=>{var c;return l.label.toUpperCase()>((c=r.label)==null?void 0:c.toUpperCase())?1:-1})}),i!=null&&i.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{k.queueCommandClear(i.queue_id)},icon:"mdi-cancel"});const n=t.source_list.filter(l=>!l.passive||l.id==t.active_source);return t.active_source!=t.player_id&&n.push({id:t.player_id,name:oe("music_assistant_source"),passive:!1,can_play_pause:!0,can_seek:!0,can_next_previous:!0}),!t.synced_to&&n.length>0&&s.push({label:"select_source",labelArgs:[],icon:"mdi-import",subItems:n.map(l=>({label:l.name,labelArgs:[],disabled:l.id==t.active_source,selected:l.id==t.active_source,action:()=>{k.playerCommandGroupSelectSource(t.player_id,l.id)}})).sort((l,r)=>{var c;return l.label.toUpperCase()>((c=r.label)==null?void 0:c.toUpperCase())?1:-1})}),i&&"dont_stop_the_music_enabled"in i&&s.push({label:i.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{k.queueCommandDontStopTheMusicToggle(i.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,lt.push(`/settings/editplayer/${t.player_id}`)},icon:"mdi-cog-outline"}),t.type!==$e.GROUP&&s.push({label:"open_dsp_settings",labelArgs:[],action:()=>{a.showFullscreenPlayer=!1,a.showPlayersMenu=!1,lt.push(`/settings/editplayer/${t.player_id}/dsp`)},icon:"mdi-equalizer"}),s},Et=Symbol.for("vuetify:v-tabs"),Mi=ge({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},..._a(Dl({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_t=_e()({name:"VTab",props:Mi(),setup(t,i){let{slots:s,attrs:o}=i;const{textColorClasses:n,textColorStyles:l}=rl(t,"sliderColor"),r=A(),c=A(),u=S(()=>t.direction==="horizontal"),v=S(()=>{var h,p;return((p=(h=r.value)==null?void 0:h.group)==null?void 0:p.isSelected.value)??!1});function f(h){var _,w;let{value:p}=h;if(p){const T=(w=(_=r.value)==null?void 0:_.$el.parentElement)==null?void 0:w.querySelector(".v-tab--selected .v-tab__slider"),L=c.value;if(!T||!L)return;const E=getComputedStyle(T).color,D=T.getBoundingClientRect(),F=L.getBoundingClientRect(),q=u.value?"x":"y",W=u.value?"X":"Y",M=u.value?"right":"bottom",B=u.value?"width":"height",z=D[q],O=F[q],V=z>O?D[M]-F[M]:D[q]-F[q],b=Math.sign(V)>0?u.value?"right":"bottom":Math.sign(V)<0?u.value?"left":"top":"center",x=(Math.abs(V)+(Math.sign(V)<0?D[B]:F[B]))/Math.max(D[B],F[B])||0,te=D[B]/F[B]||0,j=1.5;dl(L,{backgroundColor:[E,"currentcolor"],transform:[`translate${W}(${V}px) scale${W}(${te})`,`translate${W}(${V/j}px) scale${W}(${(x-1)/j+1})`,"none"],transformOrigin:Array(3).fill(b)},{duration:225,easing:cl})}}return be(()=>{const h=Qe.filterProps(t);return m(Qe,ee({symbol:Et,ref:r,class:["v-tab",t.class],style:t.style,tabindex:v.value?0:-1,role:"tab","aria-selected":String(v.value),active:!1},h,o,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":f}),{...s,default:()=>{var p;return m(G,null,[((p=s.default)==null?void 0:p.call(s))??t.text,!t.hideSlider&&m("div",{ref:c,class:["v-tab__slider",n.value],style:l.value},null)])}})}),ul({},r)}}),Bi=t=>{const{touchstartX:i,touchendX:s,touchstartY:o,touchendY:n}=t,l=.5,r=16;t.offsetX=s-i,t.offsetY=n-o,Math.abs(t.offsetY)<l*Math.abs(t.offsetX)&&(t.left&&s<i-r&&t.left(t),t.right&&s>i+r&&t.right(t)),Math.abs(t.offsetX)<l*Math.abs(t.offsetY)&&(t.up&&n<o-r&&t.up(t),t.down&&n>o+r&&t.down(t))};function Ei(t,i){var o;const s=t.changedTouches[0];i.touchstartX=s.clientX,i.touchstartY=s.clientY,(o=i.start)==null||o.call(i,{originalEvent:t,...i})}function Ai(t,i){var o;const s=t.changedTouches[0];i.touchendX=s.clientX,i.touchendY=s.clientY,(o=i.end)==null||o.call(i,{originalEvent:t,...i}),Bi(i)}function Li(t,i){var o;const s=t.changedTouches[0];i.touchmoveX=s.clientX,i.touchmoveY=s.clientY,(o=i.move)==null||o.call(i,{originalEvent:t,...i})}function qi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:s=>Ei(s,i),touchend:s=>Ai(s,i),touchmove:s=>Li(s,i)}}function zi(t,i){var c;const s=i.value,o=s!=null&&s.parent?t.parentElement:t,n=(s==null?void 0:s.options)??{passive:!0},l=(c=i.instance)==null?void 0:c.$.uid;if(!o||!l)return;const r=qi(i.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[l]=r,ga(r).forEach(u=>{o.addEventListener(u,r[u],n)})}function Ri(t,i){var l,r;const s=(l=i.value)!=null&&l.parent?t.parentElement:t,o=(r=i.instance)==null?void 0:r.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];ga(n).forEach(c=>{s.removeEventListener(c,n[c])}),delete s._touchHandlers[o]}const Da={mounted:zi,unmounted:Ri},Wa=Symbol.for("vuetify:v-window"),Oa=Symbol.for("vuetify:v-window-group"),Na=ge({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ee(),...Oe(),...et()},"VWindow"),da=_e()({name:"VWindow",directives:{Touch:Da},props:Na(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const{themeClasses:o}=ot(t),{isRtl:n}=bt(),{t:l}=ml(),r=fa(t,Oa),c=A(),u=S(()=>n.value?!t.reverse:t.reverse),v=ke(!1),f=S(()=>{const q=t.direction==="vertical"?"y":"x",M=(u.value?!v.value:v.value)?"-reverse":"";return`v-window-${q}${M}-transition`}),h=ke(0),p=A(void 0),_=S(()=>r.items.value.findIndex(q=>r.selected.value.includes(q.id)));ie(_,(q,W)=>{const M=r.items.value.length,B=M-1;M<=2?v.value=q<W:q===B&&W===0?v.value=!0:q===0&&W===B?v.value=!1:v.value=q<W}),pl(Wa,{transition:f,isReversed:v,transitionCount:h,transitionHeight:p,rootRef:c});const w=S(()=>t.continuous||_.value!==0),T=S(()=>t.continuous||_.value!==r.items.value.length-1);function L(){w.value&&r.prev()}function E(){T.value&&r.next()}const D=S(()=>{const q=[],W={icon:n.value?t.nextIcon:t.prevIcon,class:`v-window__${u.value?"right":"left"}`,onClick:r.prev,"aria-label":l("$vuetify.carousel.prev")};q.push(w.value?s.prev?s.prev({props:W}):m(Qe,W,null):m("div",null,null));const M={icon:n.value?t.prevIcon:t.nextIcon,class:`v-window__${u.value?"left":"right"}`,onClick:r.next,"aria-label":l("$vuetify.carousel.next")};return q.push(T.value?s.next?s.next({props:M}):m(Qe,M,null):m("div",null,null)),q}),F=S(()=>t.touch===!1?t.touch:{...{left:()=>{u.value?L():E()},right:()=>{u.value?E():L()},start:W=>{let{originalEvent:M}=W;M.stopPropagation()}},...t.touch===!0?{}:t.touch});return be(()=>ba(m(t.tag,{ref:c,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},o.value,t.class],style:t.style},{default:()=>{var q,W;return[m("div",{class:"v-window__container",style:{height:p.value}},[(q=s.default)==null?void 0:q.call(s,{group:r}),t.showArrows!==!1&&m("div",{class:"v-window__controls"},[D.value])]),(W=s.additional)==null?void 0:W.call(s,{group:r})]}}),[[vl("touch"),F.value]])),{group:r}}}),Di=ge({..._a(Na(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),Wi=_e()({name:"VTabsWindow",props:Di(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:s}=i;const o=wa(Et,null),n=st(t,"modelValue"),l=S({get(){var r;return n.value!=null||!o?n.value:(r=o.items.value.find(c=>o.selected.value.includes(c.id)))==null?void 0:r.value},set(r){n.value=r}});return be(()=>{const r=da.filterProps(t);return m(da,ee({_as:"VTabsWindow"},r,{modelValue:l.value,"onUpdate:modelValue":c=>l.value=c,class:["v-tabs-window",t.class],style:t.style,mandatory:!1,touch:!1}),s)}),{}}}),Ha=ge({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ee(),...gl(),..._l()},"VWindowItem"),ca=_e()({name:"VWindowItem",directives:{Touch:Da},props:Ha(),emits:{"group:selected":t=>!0},setup(t,i){let{slots:s}=i;const o=wa(Wa),n=yl(t,Oa),{isBooted:l}=nt();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const r=ke(!1),c=S(()=>l.value&&(o.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function u(){!r.value||!o||(r.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function v(){var w;r.value||!o||(r.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=De((w=o.rootRef.value)==null?void 0:w.clientHeight)),o.transitionCount.value+=1)}function f(){u()}function h(w){r.value&&va(()=>{!c.value||!r.value||!o||(o.transitionHeight.value=De(w.clientHeight))})}const p=S(()=>{const w=o.isReversed.value?t.reverseTransition:t.transition;return c.value?{name:typeof w!="string"?o.transition.value:w,onBeforeEnter:v,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:v,onAfterLeave:u,onLeaveCancelled:f,onEnter:h}:!1}),{hasContent:_}=fl(t,n.isSelected);return be(()=>m(hl,{transition:p.value,disabled:!l.value},{default:()=>{var w;return[ba(m("div",{class:["v-window-item",n.selectedClass.value,t.class],style:t.style},[_.value&&((w=s.default)==null?void 0:w.call(s))]),[[bl,n.isSelected.value]])]}})),{groupItem:n}}}),Oi=ge({...Ha()},"VTabsWindowItem"),Ni=_e()({name:"VTabsWindowItem",props:Oi(),setup(t,i){let{slots:s}=i;return be(()=>{const o=ca.filterProps(t);return m(ca,ee({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",t.class],style:t.style}),s)}),{}}});function Hi(t){return t?t.map(i=>kl(i)?i:{text:i,value:i}):[]}const Ui=ge({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...wl({mandatory:"force",selectedClass:"v-tab-item--selected"}),...ha(),...Oe()},"VTabs"),xi=_e()({name:"VTabs",props:Ui(),emits:{"update:modelValue":t=>!0},setup(t,i){let{attrs:s,slots:o}=i;const n=st(t,"modelValue"),l=S(()=>Hi(t.items)),{densityClasses:r}=ya(t),{backgroundColorClasses:c,backgroundColorStyles:u}=Ye(le(t,"bgColor")),{scopeId:v}=ma();return It({VTab:{color:le(t,"color"),direction:le(t,"direction"),stacked:le(t,"stacked"),fixed:le(t,"fixedTabs"),sliderColor:le(t,"sliderColor"),hideSlider:le(t,"hideSlider")}}),be(()=>{const f=Jt.filterProps(t),h=!!(o.window||t.items.length>0);return m(G,null,[m(Jt,ee(f,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},r.value,c.value,t.class],style:[{"--v-tabs-height":De(t.height)},u.value,t.style],role:"tablist",symbol:Et},v,s),{default:()=>{var p;return[((p=o.default)==null?void 0:p.call(o))??l.value.map(_=>{var w;return((w=o.tab)==null?void 0:w.call(o,{item:_}))??m(_t,ee(_,{key:_.text,value:_.value}),{default:o[`tab.${_.value}`]?()=>{var T;return(T=o[`tab.${_.value}`])==null?void 0:T.call(o,{item:_})}:void 0})})]}}),h&&m(Wi,ee({modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,key:"tabs-window"},v),{default:()=>{var p;return[l.value.map(_=>{var w;return((w=o.item)==null?void 0:w.call(o,{item:_}))??m(Ni,{value:_.value},{default:()=>{var T;return(T=o[`item.${_.value}`])==null?void 0:T.call(o,{item:_})}})}),(p=o.window)==null?void 0:p.call(o)]}})])}),{}}}),Fi=["onClick"],Yi={class:"main"},Xi={key:0,class:"main-media-details"},Gi={key:0,class:"main-media-details-image"},ji={class:"main-media-details-track-info"},Ki={key:0},Zi={key:0},Ji={key:11,style:{margin:"auto","padding-top":"20px"}},eo={key:1,class:"main-queue-items"},to={class:"queue-items-scroll-box"},ao={class:"media-thumb listitem-media-thumb"},lo={class:"d-flex"},io={style:{"white-space":"nowrap"},class:"pr-1"},oo={key:0},so={key:0,style:{"margin-left":"50px"}},no={key:0,class:"text-caption"},ro={key:2,class:"main-queue-items"},uo={class:"main-media-details-image main-media-details-image-alt"},co={class:"player-bottom"},mo={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},vo={class:"media-controls"},po={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},yo={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},fo=Y({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(t){const{name:i}=Pt(),s=t,o=new ht,n=A(-1),l=new ht,r=A([]),c=A(0),u=A(!1),v=S(()=>a.activePlayerQueue?r.value.slice(a.activePlayerQueue.current_index):[]),f=S(()=>a.activePlayerQueue?r.value.slice(0,a.activePlayerQueue.current_index).reverse():[]),h=S(()=>{switch(i.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return a.showQueueItems?"1.5em":"2.5em";case"xl":return a.showQueueItems?"1.6em":"3em";case"xxl":return a.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),p=S(()=>{switch(i.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return a.showQueueItems?"1.0em":"1.6em";case"xl":return a.showQueueItems?"1.2em":"2em";case"xxl":return a.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),_=S(()=>it.display.height.value>800),w=function(V){a.showFullscreenPlayer=!1,lt.push({name:V.media_type,params:{itemId:V.item_id,provider:V.provider}})},T=function(V){a.globalSearchTerm=V,lt.push({name:"search"}),a.showFullscreenPlayer=!1},L=function(V,b){var te,j,re,we,fe,he,X;const R=r.value.indexOf(b),x=[{label:"play_now",labelArgs:[],action:()=>{D(b,"play_now")},icon:"mdi-play-circle-outline",disabled:R===((te=a.activePlayerQueue)==null?void 0:te.current_index)||R===((j=a.activePlayerQueue)==null?void 0:j.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{D(b,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:R<=(((re=a.activePlayerQueue)==null?void 0:re.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{D(b,"up")},icon:"mdi-arrow-up",disabled:R<=(((we=a.activePlayerQueue)==null?void 0:we.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{D(b,"down")},icon:"mdi-arrow-down",disabled:R<=(((fe=a.activePlayerQueue)==null?void 0:fe.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{D(b,"delete")},icon:"mdi-delete",disabled:R<=(((he=a.activePlayerQueue)==null?void 0:he.index_in_buffer)||0)}];((X=b==null?void 0:b.media_item)==null?void 0:X.media_type)==H.TRACK&&x.push({label:"show_info",labelArgs:[],action:()=>{w(b.media_item)},icon:"mdi-information-outline",disabled:!1}),Me.emit("contextmenu",{items:x,posX:V.clientX,posY:V.clientY})},E=function(V){a.activePlayer&&Me.emit("contextmenu",{items:Ra(a.activePlayer,a.activePlayerQueue),posX:V.clientX,posY:V.clientY})},D=function(V,b){var R,x,te,j,re;!V||!a.activePlayerQueue||(b=="play_now"?k.queueCommandPlayIndex((R=a.activePlayerQueue)==null?void 0:R.queue_id,V.queue_item_id):b=="move_next"?k.queueCommandMoveNext((x=a.activePlayerQueue)==null?void 0:x.queue_id,V.queue_item_id):b=="up"?k.queueCommandMoveUp((te=a.activePlayerQueue)==null?void 0:te.queue_id,V.queue_item_id):b=="down"?k.queueCommandMoveDown((j=a.activePlayerQueue)==null?void 0:j.queue_id,V.queue_item_id):b=="delete"&&k.queueCommandDelete((re=a.activePlayerQueue)==null?void 0:re.queue_id,V.queue_item_id))},F=async function(){u.value=!0,r.value=[],await ea(100),u.value=!1},q=async function({done:V}){var te;if(!a.activePlayerQueue||a.activePlayerQueue.items==0){V("empty");return}if(r.value.length>=((te=a.activePlayerQueue)==null?void 0:te.items)){V("empty");return}const b=r.value.length,R=(a.activePlayerQueue.current_index||0)+50,x=await k.getPlayerQueueItems(a.activePlayerQueue.queue_id,R,b);r.value.push(...x),x.length<50?V("empty"):V("ok")};We(()=>{const V=k.subscribe(Pl.QUEUE_ITEMS_UPDATED,b=>{var R;b.object_id==((R=a.activePlayerQueue)==null?void 0:R.queue_id)&&(b.data,F())});Je(V)});const W=async function(V){var x;if(!((x=a.curQueueItem)!=null&&x.media_item))return;if(!a.curQueueItem.media_item.favorite){k.toggleFavorite(a.curQueueItem.media_item);return}let b=a.curQueueItem.media_item;(b.provider!="library"||!("provider_mappings"in b))&&[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(b.media_type)&&(b=await k.getLibraryItem(b.media_type,b.item_id,b.provider)||b);const R=[];"favorite"in b&&b.favorite&&b.provider=="library"&&[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(b.media_type)&&R.push({label:"favorites_remove",labelArgs:[],action:()=>{k.removeItemFromFavorites(b.media_type,b.item_id),b.favorite=!1,a.curQueueItem.media_item.favorite=!1},icon:"mdi-heart"}),[H.ALBUM,H.ARTIST,H.AUDIOBOOK,H.PLAYLIST,H.PODCAST,H.RADIO,H.TRACK].includes(b.media_type)&&R.push({label:"add_playlist",labelArgs:[],action:()=>{Me.emit("playlistdialog",{items:[a.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}),Me.emit("contextmenu",{items:R,posX:V.clientX,posY:V.clientY})},M=function(){u.value=!0,ea(100).then(()=>{u.value=!1})},B=function(V,b){k.playMedia(V.uri,Cl.PLAY,void 0,b.position.toString())};ie(()=>a.activePlayerId,V=>{F()},{immediate:!0});const z=A(void 0),O=A(void 0);return gt(()=>{const V=tt("white"),b=tt("black"),R=5,x=.05,te=it.theme.current.value.dark?s.colorPalette.darkColor||"#000":s.colorPalette.lightColor||"#fff";let j=tt(te);const re=V.contrast(j),we=b.contrast(j),fe=re>=we;let he=fe?V:b,X=Math.max(re,we);if(X<R){let Pe=x;for(;X<R&&Pe<=.5;)fe?j=j.darken(x):j=j.lighten(x),X=tt(he).contrast(j),Pe+=x}document.documentElement.style.setProperty("--text-color",he.hex()),z.value=he.hex(),O.value=j.hex()}),(V,b)=>(d(),C(Va,{modelValue:e(a).showFullscreenPlayer,"onUpdate:modelValue":b[12]||(b[12]=R=>e(a).showFullscreenPlayer=R),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[m(je,{color:O.value},{default:y(()=>{var R,x,te,j,re,we,fe,he,X,Pe,Ne,He,At,Lt,qt,zt,Rt,Dt,Wt,Ot,Nt,Ht,Ut,xt,Ft,Yt,Xt,Gt,jt;return[m(Ol,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[m(se,{icon:"",onClick:b[0]||(b[0]=Q=>e(a).showFullscreenPlayer=!1)},{default:y(()=>[m(U,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>{var Q;return[(Q=e(a).activePlayerQueue)!=null&&Q.radio_source.length?(d(),C(Qt,{key:0,scrim:""},{activator:y(({props:K})=>[m(se,ee(K,{icon:""}),{default:y(()=>[m(U,{color:"accent",icon:"mdi-radio-tower"})]),_:2},1040)]),default:y(()=>[m(je,{title:e(oe)("queue_radio_enabled"),subtitle:e(oe)("queue_radio_based_on")},{text:y(()=>{var K;return[(d(!0),g(G,null,ne((K=e(a).activePlayerQueue)==null?void 0:K.radio_source,me=>(d(),g("div",{key:me.uri},[$("a",{onClick:Le=>w(me)},I(me.name),9,Fi)]))),128))]}),_:1},8,["title","subtitle"])]),_:1})):P("",!0),_.value?P("",!0):(d(),C(za,{key:1})),m(se,{icon:"",onClick:ue(E,["stop"])},{default:y(()=>[m(U,{icon:"mdi-dots-vertical"})]),_:1})]}),_:1}),$("div",Yi,[e(Z)("bp7")||!e(a).showQueueItems?(d(),g("div",Xi,[V.$vuetify.display.height>600?(d(),g("div",Gi,[((R=e(a).activePlayer)==null?void 0:R.powered)!=!1&&!((x=e(a).curQueueItem)!=null&&x.image)&&((j=(te=e(a).activePlayer)==null?void 0:te.current_media)!=null&&j.image_url)?(d(),C(Xe,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(a).activePlayer.current_media.image_url},null,8,["src"])):((re=e(a).activePlayer)==null?void 0:re.powered)!=!1?(d(),C(Re,{key:1,item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:V.$vuetify.theme.current.dark?e(Ke):e(pt)},null,8,["item","fallback"])):(d(),C(Xe,{key:2,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:V.$vuetify.theme.current.dark?e(Ke):e(pt)},null,8,["src"]))])):P("",!0),$("div",ji,[((we=e(a).activePlayer)==null?void 0:we.powered)==!1?(d(),C(Ue,{key:0,style:J(`font-size: ${h.value};`)},{default:y(()=>{var Q;return[N(I((Q=e(a).activePlayer)==null?void 0:Q.display_name),1)]}),_:1},8,["style"])):(fe=e(a).curQueueItem)!=null&&fe.media_item?(d(),C(Ue,{key:1,style:J(`font-size: ${h.value};cursor:pointer;`),onClick:b[1]||(b[1]=Q=>w(e(a).curQueueItem.media_item))},{default:y(()=>[m(pe,{sync:e(o)},{default:y(()=>[N(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",Ki,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])]),_:1},8,["style"])):!e(a).activePlayerQueue&&((X=(he=e(a).activePlayer)==null?void 0:he.current_media)!=null&&X.title)?(d(),C(Ue,{key:2},{default:y(()=>{var Q,K,me,Le;return[(K=(Q=e(a).activePlayer)==null?void 0:Q.current_media)!=null&&K.artist?(d(),g("div",Zi,[m(pe,{sync:e(o)},{default:y(()=>{var Ce,Ie;return[N(I((Ie=(Ce=e(a).activePlayer)==null?void 0:Ce.current_media)==null?void 0:Ie.artist),1)]}),_:1},8,["sync"])])):P("",!0),(Le=(me=e(a).activePlayer)==null?void 0:me.current_media)!=null&&Le.title?(d(),g("div",{key:1,style:J(`font-size: ${p.value};`)},[m(pe,{sync:e(o)},{default:y(()=>{var Ce,Ie;return[N(I((Ie=(Ce=e(a).activePlayer)==null?void 0:Ce.current_media)==null?void 0:Ie.title),1)]}),_:1},8,["sync"])],4)):P("",!0)]}),_:1})):(d(),C(Ue,{key:3,style:J(`font-size: ${h.value};cursor:pointer;`),onClick:b[2]||(b[2]=Q=>e(a).showPlayersMenu=!0)},{default:y(()=>[m(pe,{sync:e(o)},{default:y(()=>{var Q;return[N(I(((Q=e(a).activePlayer)==null?void 0:Q.display_name)||e(oe)("no_player")),1)]}),_:1},8,["sync"])]),_:1},8,["style"])),((Pe=e(a).activePlayer)==null?void 0:Pe.powered)==!1?(d(),C(Te,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[N(I(e(oe)("off")),1)]),_:1})):P("",!0),(He=(Ne=e(a).curQueueItem)==null?void 0:Ne.streamdetails)!=null&&He.stream_title&&((At=e(a).activePlayer)==null?void 0:At.powered)!=!1?(d(),C(Te,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:b[3]||(b[3]=Q=>{var K,me;return T((me=(K=e(a).curQueueItem)==null?void 0:K.streamdetails)==null?void 0:me.stream_title)})},{default:y(()=>[m(pe,{sync:e(o)},{default:y(()=>[N(I(e(a).curQueueItem.streamdetails.stream_title),1)]),_:1},8,["sync"])]),_:1})):P("",!0),(Lt=e(a).curQueueItem)!=null&&Lt.media_item&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&((qt=e(a).activePlayer)==null?void 0:qt.powered)!=!1?(d(),C(Te,{key:6,style:J(`font-size: ${p.value};cursor:pointer;`),onClick:b[4]||(b[4]=Q=>w(e(a).curQueueItem.media_item.album))},{default:y(()=>[m(pe,{sync:e(o)},{default:y(()=>[N(I(e(a).curQueueItem.media_item.album.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(zt=e(a).curQueueItem)!=null&&zt.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length&&((Rt=e(a).activePlayer)==null?void 0:Rt.powered)!=!1?(d(),C(Te,{key:7,style:J(`font-size: ${p.value};cursor:pointer;`),onClick:b[5]||(b[5]=Q=>w(e(a).curQueueItem.media_item.artists[0]))},{default:y(()=>[m(pe,{sync:e(o)},{default:y(()=>[N(I(e(a).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):P("",!0),(Dt=e(a).curQueueItem)!=null&&Dt.media_item&&"podcast"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.podcast?(d(),C(Te,{key:8,style:J(`font-size: ${p.value};`)},{default:y(()=>[m(pe,{sync:e(o)},{default:y(()=>[N(I(e(a).curQueueItem.media_item.podcast.name),1)]),_:1},8,["sync"])]),_:1},8,["style"])):e(a).activePlayer&&((Wt=e(a).activePlayer)==null?void 0:Wt.active_source)!=((Ot=e(a).activePlayer)==null?void 0:Ot.player_id)&&((Nt=e(a).activePlayer)==null?void 0:Nt.powered)!=!1?(d(),C(Te,{key:9},{default:y(()=>[N(I(e(oe)("external_source_active",[e(Tt)(e(a).activePlayer)])),1)]),_:1})):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0&&((Ht=e(a).activePlayer)==null?void 0:Ht.powered)!=!1?(d(),C(Te,{key:10,style:J(`font-size: ${p.value}`)},{default:y(()=>[N(I(e(oe)("queue_empty")),1)]),_:1},8,["style"])):P("",!0),((Ut=e(a).activePlayer)==null?void 0:Ut.powered)!=!1?(d(),g("div",Ji,[m(ka)])):P("",!0)])])):P("",!0),e(a).showQueueItems?(d(),g("div",eo,[m(xi,{modelValue:c.value,"onUpdate:modelValue":b[6]||(b[6]=Q=>c.value=Q),"hide-slider":"",density:"compact",onClick:M},{default:y(()=>[m(_t,{value:0},{default:y(()=>{var Q,K;return[N(I(e(oe)("queue"))+" ",1),m(ft,{color:"grey",content:(((Q=e(a).activePlayerQueue)==null?void 0:Q.items)||0)-(((K=e(a).activePlayerQueue)==null?void 0:K.current_index)||0),inline:""},null,8,["content"])]}),_:1}),m(_t,{value:1},{default:y(()=>{var Q;return[N(I(e(oe)("played"))+" ",1),m(ft,{color:"grey",content:(Q=e(a).activePlayerQueue)==null?void 0:Q.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),$("div",to,[u.value?P("",!0):(d(),C(zl,{key:0,onLoad:q,"empty-text":"",height:"100%"},{default:y(()=>[m(Nl,{"item-height":70,"max-height":"90%",items:c.value==0?v.value:f.value},{default:y(({item:Q,index:K})=>{var me,Le,Ce,Ie,Kt;return[m(xa,{link:"","show-menu-btn":!0,disabled:!Q.available,onClick:ue(ve=>L(ve,Q),["stop"]),onMenu:ue(ve=>L(ve,Q),["stop"]),onMouseenter:ve=>n.value=K,onMouseleave:b[7]||(b[7]=ve=>n.value=-1)},{prepend:y(()=>[$("div",ao,[m(Re,{size:"50",item:Q},null,8,["item"])])]),title:y(()=>[m(pe,{sync:K==0&&c.value==0?e(o):e(l),disabled:!(K==0&&c.value==0||n.value==K)},{default:y(()=>[N(I(Q.name),1)]),_:2},1032,["sync","disabled"])]),subtitle:y(()=>[$("div",lo,[$("span",io,I(e(Fe)(Q.duration))+" | ",1),m(pe,{sync:K==0&&c.value==0?e(o):e(l),disabled:!(K==0&&c.value==0||n.value==K)},{default:y(()=>[Q.media_item&&"album"in Q.media_item&&Q.media_item.album?(d(),g("span",oo,I(Q.media_item.album.name),1)):P("",!0)]),_:2},1032,["sync","disabled"])])]),append:y(()=>[Q.available?P("",!0):(d(),C(U,{key:0},{default:y(()=>b[13]||(b[13]=[N("mdi-alert")])),_:1}))]),_:2},1032,["disabled","onClick","onMenu","onMouseenter"]),Q.queue_item_id==((me=e(a).curQueueItem)==null?void 0:me.queue_item_id)&&((Ie=(Ce=(Le=Q.media_item)==null?void 0:Le.metadata)==null?void 0:Ce.chapters)!=null&&Ie.length)?(d(),g("div",so,[(d(!0),g(G,null,ne((Kt=Q.media_item.metadata)==null?void 0:Kt.chapters,ve=>(d(),C(ye,{key:ve.position,onClick:ue(As=>B(Q.media_item,ve),["stop"])},{title:y(()=>[$("div",null,I(ve.name),1)]),append:y(()=>[ve.end?(d(),g("span",no,I(e(Fe)(ve.end-ve.start)),1)):P("",!0)]),_:2},1032,["onClick"]))),128))])):P("",!0)]}),_:1},8,["items"])]),_:1}))])])):P("",!0),!e(a).showQueueItems&&V.$vuetify.display.height<=600?(d(),g("div",ro,[$("div",uo,[m(Re,{item:e(a).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):P("",!0)]),$("div",co,[$("div",mo,[m(Ta,{"show-labels":!0,color:z.value},null,8,["color"])]),$("div",vo,[e(a).activePlayerQueue?(d(),C(Ae,{key:0,disabled:!((xt=e(a).curQueueItem)!=null&&xt.media_item),icon:(Yt=(Ft=e(a).curQueueItem)==null?void 0:Ft.media_item)!=null&&Yt.favorite?"mdi-heart":"mdi-heart-outline",title:e(oe)("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:W},null,8,["disabled","icon","title"])):P("",!0),V.$vuetify.display.mdAndUp?(d(),C(Ba,{key:1,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):P("",!0),m(Aa,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),m(Ea,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),m(La,{player:e(a).activePlayer,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),V.$vuetify.display.mdAndUp?(d(),C(Ma,{key:2,"player-queue":e(a).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):P("",!0),e(a).activePlayerQueue?(d(),C(qa,{key:3,class:"media-controls-item","max-height":"30px"})):P("",!0)]),e(a).activePlayer?(d(),g("div",po,[m(Ze,{width:"100%","is-powered":((Xt=e(a).activePlayer)==null?void 0:Xt.powered)!=!1,disabled:!e(a).activePlayer||!((Gt=e(a).activePlayer)!=null&&Gt.available),"model-value":Math.round(((jt=e(a).activePlayer)==null?void 0:jt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus",color:z.value,"allow-wheel":!0,"onUpdate:modelValue":b[8]||(b[8]=Q=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(e(a).activePlayerId,Q):e(k).playerCommandVolumeSet(e(a).activePlayerId,Q)),"onClick:prepend":b[9]||(b[9]=Q=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeDown(e(a).activePlayerId):e(k).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":b[10]||(b[10]=Q=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeUp(e(a).activePlayerId):e(k).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value","color"])])):P("",!0),_.value?(d(),g("div",yo,[m(Qe,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:b[11]||(b[11]=Q=>e(a).showPlayersMenu=!0)},{default:y(()=>{var Q;return[m(U,{icon:((Q=e(a).activePlayer)==null?void 0:Q.icon)||"mdi-speaker"},null,8,["icon"]),N(" "+I(e(a).activePlayer?e(rt)(e(a).activePlayer):""),1)]}),_:1})])):P("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),ho=de(fo,[["__scopeId","data-v-ce148dae"]]),_o={key:1},go={key:2,class:"icon-thumb"},bo={key:0},wo={key:2},ko={key:3},Po={key:4},Co={key:0,class:"pl-4"},Io={key:0},Vo={key:1},So={key:2},$o={key:3},Qo={key:4,class:"line-clamp-1"},To={key:5,class:"line-clamp-1"},Mo={key:6},Bo={key:7,class:"line-clamp-1"},Eo={key:8,class:"line-clamp-1"},Ao={key:0},Lo=Y({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(t){const i=new ht,s=t,o=S(()=>{var n,l;return(l=(n=a.activePlayerQueue)==null?void 0:n.current_item)==null?void 0:l.streamdetails});return(n,l)=>(d(),g(G,null,[m(ye,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>{var r,c,u,v,f,h,p,_,w,T;return[$("div",{class:"media-thumb player-media-thumb",style:J(`cursor: pointer;height: ${e(Z)({breakpoint:"phone"})?50:64}px; width: ${e(Z)({breakpoint:"phone"})?50:64}px; `),onClick:l[0]||(l[0]=L=>e(a).showFullscreenPlayer=!0)},[((r=e(a).activePlayer)==null?void 0:r.powered)!=!1&&((c=e(a).curQueueItem)!=null&&c.media_item||(u=e(a).curQueueItem)!=null&&u.image)?(d(),C(Re,{key:0,item:((v=e(a).curQueueItem)==null?void 0:v.media_item)||e(a).curQueueItem,fallback:e(Ke)},null,8,["item","fallback"])):((f=e(a).activePlayer)==null?void 0:f.powered)!=!1&&((p=(h=e(a).activePlayer)==null?void 0:h.current_media)!=null&&p.image_url)?(d(),g("div",_o,[m(Xe,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(a).activePlayer.current_media.image_url},null,8,["src"])])):(d(),g("div",go,[m(U,{size:"35",icon:((_=e(a).activePlayer)==null?void 0:_.type)==e($e).PLAYER&&((w=e(a).activePlayer)!=null&&w.group_childs.length)?"mdi-speaker-multiple":((T=e(a).activePlayer)==null?void 0:T.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:y(()=>{var r,c,u,v,f,h;return[$("div",{style:J({cursor:"pointer",color:n.primaryColor})},[((r=e(a).activePlayer)==null?void 0:r.powered)==!1?(d(),g("div",{key:0,onClick:l[1]||(l[1]=p=>e(a).showPlayersMenu=!0)},I((c=e(a).activePlayer)==null?void 0:c.display_name),1)):(u=e(a).curQueueItem)!=null&&u.media_item?(d(),g("div",{key:1,onClick:l[2]||(l[2]=p=>e(a).showFullscreenPlayer=!0)},[m(pe,{sync:e(i)},{default:y(()=>[N(I(e(a).curQueueItem.media_item.name)+" ",1),"version"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.version?(d(),g("span",bo,"("+I(e(a).curQueueItem.media_item.version)+")",1)):P("",!0)]),_:1},8,["sync"])])):e(a).curQueueItem?(d(),g("div",wo,I(e(a).curQueueItem.name),1)):!e(a).activePlayerQueue&&((f=(v=e(a).activePlayer)==null?void 0:v.current_media)!=null&&f.title)?(d(),g("div",ko,I(e(a).activePlayer.current_media.title),1)):e(a).activePlayer?(d(),g("div",Po,I((h=e(a).activePlayer)==null?void 0:h.display_name),1)):(d(),g("div",{key:5,onClick:l[3]||(l[3]=p=>e(a).showPlayersMenu=!0)},I(n.$t("no_player")),1))],4)]}),append:y(()=>{var r;return[(r=o.value)!=null&&r.audio_format.content_type&&!e(Z)({breakpoint:"phone"})&&n.showQualityDetailsBtn?(d(),g("div",Co,[m(ka)])):P("",!0)]}),subtitle:y(()=>{var r;return[$("div",{style:J({cursor:"pointer",color:n.primaryColor}),class:"line-clamp-1",onClick:l[4]||(l[4]=c=>e(a).showFullscreenPlayer=!0)},[m(pe,{sync:e(i)},{default:y(()=>{var c,u,v,f,h,p,_,w,T,L,E,D,F,q,W;return[((c=e(a).activePlayer)==null?void 0:c.powered)==!1?(d(),g("div",Io,I(n.$t("off")),1)):e(a).curQueueItem&&((u=e(a).curQueueItem.media_item)==null?void 0:u.media_type)==e(H).TRACK&&"album"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.album&&!s.showOnlyArtist?(d(),g("div",Vo,I(e(Pa)(e(a).curQueueItem.media_item.artists))+"  "+I(e(a).curQueueItem.media_item.album.name),1)):(v=e(a).curQueueItem)!=null&&v.media_item&&"artists"in e(a).curQueueItem.media_item&&e(a).curQueueItem.media_item.artists.length>0?(d(),g("div",So,I(e(a).curQueueItem.media_item.artists[0].name),1)):(f=e(a).curQueueItem)!=null&&f.media_item&&"podcast"in e(a).curQueueItem.media_item&&((h=e(a).curQueueItem.media_item.podcast)!=null&&h.name)?(d(),g("div",$o,I(e(a).curQueueItem.media_item.podcast.name),1)):(_=(p=e(a).curQueueItem)==null?void 0:p.streamdetails)!=null&&_.stream_title?(d(),g("div",Qo,I((T=(w=e(a).curQueueItem)==null?void 0:w.streamdetails)==null?void 0:T.stream_title),1)):(E=(L=e(a).curQueueItem)==null?void 0:L.media_item)!=null&&E.metadata.description?(d(),g("div",To,I(e(Ca)(e(a).curQueueItem.media_item.metadata.description,100)),1)):!e(a).activePlayerQueue&&((D=e(a).activePlayer)!=null&&D.active_source)&&((q=(F=e(a).activePlayer)==null?void 0:F.current_media)!=null&&q.artist)?(d(),g("div",Mo,I(e(a).activePlayer.current_media.artist),1)):!e(a).activePlayerQueue&&((W=e(a).activePlayer)!=null&&W.active_source)?(d(),g("div",Bo,I(n.$t("external_source_active",[e(Tt)(e(a).activePlayer)])),1)):e(a).activePlayerQueue&&e(a).activePlayerQueue.items==0?(d(),g("div",Eo,I(n.$t("queue_empty")),1)):P("",!0)]}),_:1},8,["sync"]),e(a).activePlayer&&((r=e(a).activePlayer)==null?void 0:r.powered)!=!1?(d(),g("div",Ao,I(e(rt)(e(a).activePlayer)),1)):P("",!0)],4)]}),_:1}),m(ho,{"show-fullscreen":e(a).showFullscreenPlayer,"color-palette":n.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),qo={key:1,class:"text-caption volumecaption"},zo={key:0,class:"text-caption volumecaption"},Ro=Y({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},showHeadingRow:{type:Boolean},showVolumeControl:{type:Boolean},allowWheel:{type:Boolean}},setup(t){const i=t,s=A([]),o=A([]),n=A(void 0),l=S(()=>i.player.group_childs.length>0),r=function(u){var f,h;const v=[];for(const p of u.group_childs){const _=(f=k)==null?void 0:f.players[p];_&&_.volume_control!=ce&&_&&_.available&&!v.includes(_)&&v.push(_)}if(i.showSyncControls&&u.supported_features.includes(Se.SET_MEMBERS))for(const p of Object.values((h=k)==null?void 0:h.players))p.player_id!=u.player_id&&(!u.can_group_with.includes(p.player_id)&&!u.can_group_with.includes(p.provider)||p.available&&(p.active_group&&p.active_group!=u.player_id||p.active_source&&p.state==Ve.PLAYING&&![u.player_id,p.player_id].includes(p.active_source)||v.includes(p)||v.push(p)));return v.sort((p,_)=>p.display_name.toUpperCase()>_.display_name.toUpperCase()?1:-1),v},c=async function(u,v){const f=i.player.player_id;v?(o.value.includes(u)&&(o.value=o.value.filter(h=>h!=u)),s.value.includes(u)||s.value.push(u),k.players[f].group_childs.push(u)):(s.value.includes(u)&&(s.value=s.value.filter(h=>h!=u)),o.value.includes(u)||o.value.push(u),k.players[f].group_childs=k.players[f].group_childs.filter(h=>h!=u)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&k.playerCommandUnGroupMany(o.value).catch(async()=>{k.players[f]=await k.getPlayer(f)}).finally(()=>{o.value=[]}),s.value.length>0&&k.playerCommandGroupMany(f,s.value).catch(async()=>{k.players[f]=await k.getPlayer(f)}).finally(()=>{s.value=[]})},1e3)};return(u,v)=>(d(),C(Be,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:y(()=>[u.showHeadingRow?(d(),C(ye,{key:0,class:"volumesliderrow heading",link:!1,style:J(u.player.powered==!1?"opacity: 0.6":"opacity: 1")},{prepend:y(()=>[m(U,{size:25,icon:u.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[$("h5",null,I(e(rt)(u.player,27)),1)]),append:y(()=>[u.player.power_control!=e(ce)?(d(),C(se,{key:0,class:"powerbtn",variant:"icon",onClick:v[0]||(v[0]=ue(f=>e(k).playerCommandPowerToggle(u.player.player_id),["stop"]))},{default:y(()=>[m(U,{size:25,icon:"mdi-power"})]),_:1})):P("",!0)]),_:1},8,["style"])):P("",!0),u.showVolumeControl&&(u.player.volume_control!=e(ce)||u.player.group_childs.length)?(d(),C(ye,{key:1,class:"volumesliderrow",link:!1,style:J(u.player.powered==!1?"opacity: 0.35":"opacity: 0.75")},{prepend:y(()=>[m(se,{icon:"",style:{height:"25px"},disabled:u.player.type==e($e).GROUP||u.player.group_childs.length>0||u.player.mute_control==e(ce),onClick:v[1]||(v[1]=ue(f=>e(k).playerCommandMuteToggle(u.player.player_id),["stop"]))},{default:y(()=>[m(U,{size:25,icon:u.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:y(()=>[u.player.volume_control!=e(ce)||u.player.group_childs.length?(d(),C(Ze,{key:0,color:"secondary",width:"100%","is-powered":u.player.powered!=!1,disabled:!u.player.available,"model-value":Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level||0),onClick:v[2]||(v[2]=ue(()=>{},["stop"])),"onUpdate:modelValue":v[3]||(v[3]=f=>u.player.group_childs.length>0?e(k).playerCommandGroupVolume(u.player.player_id,f):e(k).playerCommandVolumeSet(u.player.player_id,f))},null,8,["is-powered","disabled","model-value"])):P("",!0)]),append:y(()=>[l.value&&!u.showSubPlayers?(d(),C(U,{key:0,class:"expandbtn"},{default:y(()=>v[7]||(v[7]=[N(" mdi-chevron-down ")])),_:1})):(d(),g("div",qo,I(Math.round(u.player.group_childs.length?u.player.group_volume:u.player.volume_level||0)),1))]),_:1},8,["style"])):P("",!0),u.showSubPlayers&&(u.player.group_childs.length>0||u.showSyncControls)&&r(u.player).length>0?(d(),g("div",{key:2,onClick:v[6]||(v[6]=ue(()=>{},["stop"]))},[m(Ge,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(d(!0),g(G,null,ne(r(u.player),f=>(d(),g("div",{key:f.player_id},[m(ye,{class:"volumesliderrow",link:!1,style:J(f.powered!=!1||u.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:v[4]||(v[4]=ue(()=>{},["stop"]))},{prepend:y(()=>[m(U,{size:30,icon:f.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[$("h6",null,I(e(Ca)(f.display_name,27)),1)]),append:y(()=>[u.showSyncControls?(d(),C(Hl,{key:0,ripple:!1,disabled:f.player_id==u.player.player_id,"model-value":u.player.group_childs.includes(f.player_id)||f.player_id==u.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":h=>c(f.player_id,h)},null,8,["disabled","model-value","onUpdate:modelValue"])):P("",!0)]),_:2},1032,["style"]),f.volume_control!=e(ce)?(d(),C(ye,{key:0,class:"volumesliderrow",link:!1,style:J(f.powered==!1?"opacity: 0.4":"opacity: 0.75"),onClick:v[5]||(v[5]=ue(()=>{},["stop"]))},{prepend:y(()=>[m(se,{icon:"",disabled:!f.available||f.mute_control==e(ce),style:{height:"25px"},onClick:h=>e(k).playerCommandMuteToggle(f.player_id)},{default:y(()=>[m(U,{size:25,icon:f.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:y(()=>[f.volume_control!=e(ce)?(d(),C(Ze,{key:0,color:"secondary",width:"100%","is-powered":f.powered!=!1,disabled:!f.available,"allow-wheel":u.allowWheel,"model-value":Math.round(f.volume_level||0),"onUpdate:modelValue":h=>e(k).playerCommandVolumeSet(f.player_id,h)},null,8,["is-powered","disabled","allow-wheel","model-value","onUpdate:modelValue"])):P("",!0)]),append:y(()=>[f.volume_control!=e(ce)?(d(),g("div",zo,I(f.volume_level),1)):P("",!0)]),_:2},1032,["style"])):P("",!0),v[8]||(v[8]=$("div",{style:{height:"14px"}},null,-1))]))),128))])):P("",!0)]),_:1}))}}),Ua=de(Ro,[["__scopeId","data-v-a2a4ac06"]]),Do={key:0},Wo={key:0},Oo={class:"text-caption"},No={key:1},Ho=Y({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(t){const i=t,s=A(!1);return(o,n)=>i.isVisible&&e(a).activePlayer?(d(),g("div",Do,[m(Qt,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=l=>s.value=l),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:l})=>{var r,c;return[e(Z)("bp6")||!o.responsiveVolumeSize?(d(),g("div",Wo,[m(Ze,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(a).activePlayer.group_childs.length>0?Math.round(((r=e(a).activePlayer)==null?void 0:r.group_volume)||0):Math.round(((c=e(a).activePlayer)==null?void 0:c.volume_level)||0),"allow-wheel":!0,"onUpdate:modelValue":n[0]||(n[0]=u=>{var v,f;return e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(((v=e(a).activePlayer)==null?void 0:v.player_id)||"",u):e(k).playerCommandVolumeSet(((f=e(a).activePlayer)==null?void 0:f.player_id)||"",u)})},{prepend:y(()=>[m(se,ee({variant:"icon",size:"48",ripple:!1},{...l}),{default:y(()=>{var u,v;return[m(U,{color:i.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),$("div",Oo,I(e(a).activePlayer.group_childs.length>0?Math.round(((u=e(a).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((v=e(a).activePlayer)==null?void 0:v.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(d(),g("div",No,[m(se,ee({...l},{size:"48",variant:"icon"}),{default:y(()=>{var u,v;return[m(U,{color:i.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),$("div",{class:"text-caption",style:J({color:i.color?o.color:""})},I(e(a).activePlayer.group_childs.length>0?Math.round(((u=e(a).activePlayer)==null?void 0:u.group_volume)||0):Math.round(((v=e(a).activePlayer)==null?void 0:v.volume_level)||0)),5)]}),_:2},1040)]))]}),default:y(()=>[m(je,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[e(a).activePlayer?(d(),C(Ua,{key:0,player:e(a).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"show-heading-row":!0,"show-volume-control":!0,"allow-wheel":!0,style:{"margin-left":"18px"}},null,8,["player"])):P("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):P("",!0)}}),Uo=de(Ho,[["__scopeId","data-v-f4084555"]]),xo=Y({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(t){return(i,s)=>(d(),g(G,null,[i.player&&i.player.isVisible?(d(),C(za,{key:0,color:i.player.color},null,8,["color"])):P("",!0),i.queue&&i.queue.isVisible?(d(),C(qa,{key:1,color:i.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):P("",!0),i.volume&&i.volume.isVisible?(d(),C(Uo,{key:2,color:i.volume.color,"volume-size":i.volume.volumeSize,"responsive-volume-size":i.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):P("",!0)],64))}}),Fo=["data-floating"],Yo=["data-mobile"],Xo={class:"mediacontrols-left"},Go={class:"mediacontrols-bottom-center"},jo={class:"mediacontrols-bottom-right"},Ko={key:0,class:"volume-slider"},Zo=Y({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(t){Vl(l=>({"4978018a":n.value})),pa();const{mobile:i}=Pt({mobileBreakpoint:576}),s=A({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=it.theme.current.value.dark?Ke:pt,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=Il(o)});const n=S(()=>it.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return ie(()=>{var l;return(l=a.curQueueItem)==null?void 0:l.queue_item_id},()=>{var l;(l=a.curQueueItem)!=null&&l.media_item?o.src=ta(a.curQueueItem.media_item,aa.THUMB)||"":a.curQueueItem?o.src=ta(a.curQueueItem,aa.THUMB)||"":o.src=""}),(l,r)=>{var c,u,v,f,h,p,_,w,T,L,E;return d(),g(G,null,[$("div",{class:"mediacontrols-bg","data-floating":l.useFloatingPlayer},null,8,Fo),$("div",{class:"mediacontrols","data-mobile":e(i)},[$("div",Xo,[m(Lo,{"show-quality-details-btn":!!e(Z)("bp8"),"show-only-artist":!e(Z)("bp7"),"color-palette":s.value,"primary-color":l.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),$("div",Go,[m(ua,{"visible-components":{repeat:{isVisible:e(Z)("bp3")},shuffle:{isVisible:e(Z)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:l.useFloatingPlayer},previous:{isVisible:e(Z)("bp3")},next:{isVisible:e(Z)("bp3")}}},null,8,["visible-components"]),e(Z)("bp6")?(d(),C(Ta,{key:0,"is-progress-bar":!1,disabled:!((c=e(a).activePlayerQueue)!=null&&c.active)||((f=(v=(u=e(a).activePlayerQueue)==null?void 0:u.current_item)==null?void 0:v.media_item)==null?void 0:f.media_type)!==e(H).TRACK},null,8,["disabled"])):P("",!0)]),$("div",jo,[$("div",null,[m(xo,{queue:{isVisible:e(Z)("bp3"),color:l.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:l.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(i)&&(((h=e(a).activePlayer)==null?void 0:h.volume_control)!=e(ce)||((p=e(a).activePlayer)==null?void 0:p.group_childs.length)>0),color:l.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),m(ua,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(Z)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:l.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,Yo),e(i)&&(((_=e(a).activePlayer)==null?void 0:_.volume_control)!=e(ce)||((w=e(a).activePlayer)==null?void 0:w.group_childs.length)>0)?(d(),g("div",Ko,[m(Ze,{width:"100%",color:"secondary","is-powered":((T=e(a).activePlayer)==null?void 0:T.powered)!=!1,disabled:!e(a).activePlayer||!((L=e(a).activePlayer)!=null&&L.available),"model-value":Math.round(((E=e(a).activePlayer)==null?void 0:E.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":r[0]||(r[0]=D=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolume(e(a).activePlayerId,D):e(k).playerCommandVolumeSet(e(a).activePlayerId,D)),"onClick:prepend":r[1]||(r[1]=D=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeDown(e(a).activePlayerId):e(k).playerCommandVolumeDown(e(a).activePlayerId)),"onClick:append":r[2]||(r[2]=D=>e(a).activePlayer.group_childs.length>0?e(k).playerCommandGroupVolumeUp(e(a).activePlayerId):e(k).playerCommandVolumeUp(e(a).activePlayerId))},null,8,["is-powered","disabled","model-value"])])):P("",!0)],64)}}}),Jo=de(Zo,[["__scopeId","data-v-e7d0fafb"]]),es=ge({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...$t(),...Ee(),...St(),...Bt(),...Vt(),...Oe({tag:"footer"}),...et()},"VFooter"),ts=_e()({name:"VFooter",props:es(),setup(t,i){let{slots:s}=i;const o=A(),{themeClasses:n}=ot(t),{backgroundColorClasses:l,backgroundColorStyles:r}=Ye(le(t,"color")),{borderClasses:c}=wt(t),{elevationClasses:u}=kt(t),{roundedClasses:v}=Ct(t),f=ke(32),{resizeRef:h}=Sl(_=>{_.length&&(f.value=_[0].target.clientHeight)}),p=S(()=>t.height==="auto"?f.value:parseInt(t.height,10));return xe(()=>t.app,()=>{const _=Mt({id:t.name,order:S(()=>parseInt(t.order,10)),position:S(()=>"bottom"),layoutSize:p,elementSize:S(()=>t.height==="auto"?void 0:p.value),active:S(()=>t.app),absolute:le(t,"absolute")});gt(()=>{o.value=_.layoutItemStyles.value})}),be(()=>m(t.tag,{ref:h,class:["v-footer",n.value,l.value,c.value,u.value,v.value,t.class],style:[r.value,t.app?o.value:{height:De(t.height)},t.style]},s)),{}}}),as=Y({__name:"Footer",setup(t){const i=S(()=>a.navigationMenuStyle=="horizontal"),s=S(()=>a.navigationMenuStyle!="horizontal"?0:a.isInStandaloneMode?100:80),o=S(()=>i.value?s.value+5:0);return(n,l)=>(d(),g(G,null,[i.value?(d(),g("div",{key:0,class:at(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:J(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(Z)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):P("",!0),e(a).navigationMenuStyle=="horizontal"?(d(),C(yi,{key:1,height:s.value},null,8,["height"])):P("",!0),m(ts,{bottom:"",fixed:"",class:at(`d-flex flex-column ${i.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:J(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:y(()=>[m(Jo,{"use-floating-player":i.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),ls={class:"player-media-thumb"},is={key:1},os={key:2,class:"icon-thumb"},ss={style:{"margin-bottom":"3px"}},ns={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},rs={key:0},us={key:0},ds={key:1},cs={key:2},ms={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},vs={key:0},ps={key:1},ys={key:2},fs={key:3},hs={key:4},_s={key:5},gs={key:6},bs=Y({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(t){const i=t,s=S(()=>{if(i.player&&i.player.active_source&&i.player.active_source in k.queues)return k.queues[i.player.active_source];if(i.player&&!i.player.active_source&&i.player.player_id in k.queues)return k.queues[i.player.player_id]}),o=S(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(l){console.log("openPlayerMenu"),Me.emit("contextmenu",{items:Ra(i.player,s.value),posX:l.clientX,posY:l.clientY})};return(l,r)=>(d(),C(je,{flat:"",class:at(["panel-item",{"panel-item-selected":l.player.player_id==e(a).activePlayerId,"panel-item-idle":l.player.state==e(Ve).IDLE,"panel-item-off":l.player.powered==!1}]),ripple:!1,disabled:!l.player.available},{default:y(()=>[m(ye,{class:"panel-item-details",flat:"",ripple:!1},{prepend:y(()=>{var c,u,v,f;return[$("div",ls,[l.player.powered!=!1&&((c=o.value)!=null&&c.media_item)||(u=o.value)!=null&&u.image?(d(),C(Re,{key:0,class:"media-thumb",size:"55",item:((v=o.value)==null?void 0:v.media_item)||o.value,fallback:e(Ke)},null,8,["item","fallback"])):l.player.powered!=!1&&!s.value&&((f=l.player.current_media)!=null&&f.image_url)?(d(),g("div",is,[m(Xe,{class:"media-thumb",size:"55",src:l.player.current_media.image_url},null,8,["src"])])):(d(),g("div",os,[m(U,{size:"35",icon:l.player.type==e($e).PLAYER&&l.player.group_childs.length?"mdi-speaker-multiple":l.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:y(()=>[$("div",ss,[N(I(e(rt)(l.player,27))+" ",1),e(yt).player_id===l.player.player_id?(d(),C(U,{key:0,size:"20",class:"pl-2"},{default:y(()=>r[2]||(r[2]=[N(" mdi-monitor")])),_:1})):P("",!0)])]),subtitle:y(()=>{var c,u,v,f,h,p,_;return[l.player.powered!=!1?(d(),g("div",ns,[(c=o.value)!=null&&c.media_item?(d(),g("div",rs,[N(I((u=o.value)==null?void 0:u.media_item.name)+" ",1),"version"in((v=o.value)==null?void 0:v.media_item)&&((f=o.value)!=null&&f.media_item.version)?(d(),g("span",us,"("+I((h=o.value)==null?void 0:h.media_item.version)+")",1)):P("",!0)])):o.value?(d(),g("div",ds,I((p=o.value)==null?void 0:p.name),1)):!s.value&&((_=l.player.current_media)!=null&&_.title)?(d(),g("div",cs,I(l.player.current_media.title),1)):P("",!0)])):P("",!0)]}),default:y(()=>{var c,u,v,f,h,p,_,w,T,L,E,D,F,q,W,M,B,z,O;return[$("div",ms,[l.player.powered==!1?(d(),g("div",vs,I(l.$t("off")),1)):(c=o.value)!=null&&c.media_item&&((v=(u=o.value)==null?void 0:u.media_item)==null?void 0:v.media_type)==e(H).TRACK&&"album"in((f=o.value)==null?void 0:f.media_item)&&((h=o.value)!=null&&h.media_item.album)?(d(),g("div",ps,I(e(Pa)((p=o.value)==null?void 0:p.media_item.artists))+"  "+I((_=o.value)==null?void 0:_.media_item.album.name),1)):(w=o.value)!=null&&w.media_item&&"artists"in((T=o.value)==null?void 0:T.media_item)&&((L=o.value)==null?void 0:L.media_item.artists.length)>0?(d(),g("div",ys,I((E=o.value)==null?void 0:E.media_item.artists[0].name),1)):(F=(D=o.value)==null?void 0:D.streamdetails)!=null&&F.stream_title?(d(),g("div",fs,I((W=(q=o.value)==null?void 0:q.streamdetails)==null?void 0:W.stream_title),1)):(B=(M=o.value)==null?void 0:M.media_item)!=null&&B.metadata.description?(d(),g("div",hs,I((z=o.value)==null?void 0:z.media_item.metadata.description),1)):!s.value&&l.player.active_source?(d(),g("div",_s,I(l.$t("external_source_active",[e(Tt)(l.player)])),1)):((O=s.value)==null?void 0:O.items)==0?(d(),g("div",gs,I(l.$t("queue_empty")),1)):P("",!0)])]}),append:y(()=>{var c;return[l.player.state==e(Ve).PAUSED||l.player.state==e(Ve).PLAYING||(c=s.value)!=null&&c.items?(d(),C(se,{key:0,variant:"icon",class:"player-command-btn",onClick:r[0]||(r[0]=ue(u=>{e(k).playerCommandPlayPause(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[m(U,{size:e(Z)({breakpoint:"phone"})?"30":"32",icon:l.player.state==e(Ve).PLAYING?"mdi-pause":"mdi-play"},null,8,["size","icon"])]),_:1})):P("",!0),l.player.power_control!=e(ce)?(d(),C(se,{key:1,variant:"icon",class:"player-command-btn",onClick:r[1]||(r[1]=ue(u=>{e(k).playerCommandPowerToggle(l.player.player_id),e(a).activePlayerId=l.player.player_id},["stop"]))},{default:y(()=>[m(U,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:y(()=>r[3]||(r[3]=[N("mdi-power")])),_:1},8,["size"])]),_:1})):P("",!0),l.showMenuButton?(d(),C(se,{key:2,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:ue(n,["stop"])},{default:y(()=>[m(U,{size:e(Z)({breakpoint:"phone"})?"30":"32"},{default:y(()=>r[4]||(r[4]=[N("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):P("",!0)]}),_:1}),l.showVolumeControl?(d(),C(Ua,{key:0,player:l.player,"show-sync-controls":l.showSyncControls,"show-heading-row":!1,"show-sub-players":l.showSubPlayers,"show-volume-control":l.player.powered!=!1,"allow-wheel":!1},null,8,["player","show-sync-controls","show-sub-players","show-volume-control"])):P("",!0)]),_:1},8,["class","disabled"]))}}),ct=de(bs,[["__scopeId","data-v-a4e6aa90"]]),ws={style:{float:"right","margin-right":"-20px"}},ks=Y({__name:"PlayerSelect",setup(t){const i=A(!1),s=A(null),o=S(()=>Object.values(k.players).filter(c=>dt(c)).filter(c=>yt.player_id||c.player_id!=yt.player_id).sort((c,u)=>{var v;return c.display_name.toUpperCase()>((v=u.display_name)==null?void 0:v.toUpperCase())?1:-1}));ie(()=>a.activePlayerId,c=>{c&&localStorage.setItem("mass.LastPlayerId",c)}),ie(()=>k.players,c=>{c&&!a.activePlayer&&l()},{deep:!0}),ie(()=>k.state,c=>{c.value!=$l.CONNECTED&&(a.activePlayerId=void 0)},{deep:!0});function n(c,u=!1){a.activePlayerId==c.player_id?i.value=!i.value:(i.value=!1,a.activePlayerId=c.player_id),u&&(a.showPlayersMenu=!1)}We(()=>{l()});const l=function(){if(a.activePlayer&&dt(a.activePlayer))return;const c=r();c&&(a.activePlayerId=c.player_id)},r=function(){const c=localStorage.getItem("mass.LastPlayerId");if(c&&c in k.players&&dt(k.players[c]))return k.players[c]};return(c,u)=>(d(),g(G,null,[m(Ia,{modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":u[0]||(u[0]=v=>e(a).showPlayersMenu=v)},null,8,["modelValue"]),e(a).showPlayersMenu?(d(),C($a,{key:0,modelValue:e(a).showPlayersMenu,"onUpdate:modelValue":u[3]||(u[3]=v=>e(a).showPlayersMenu=v),location:"right",app:"",clipped:"",temporary:"",width:460,style:{"z-index":"99999"},"z-index":"99999"},{default:y(()=>[$("div",null,[m(Ue,{class:"title",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:y(()=>[$("b",null,I(c.$t("players")),1),$("div",ws,[m(se,{variant:"icon",to:{name:"playersettings"}},{default:y(()=>[m(U,{size:"30"},{default:y(()=>u[4]||(u[4]=[N("mdi-cog-outline")])),_:1})]),_:1}),m(se,{variant:"icon",onClick:u[1]||(u[1]=v=>e(a).showPlayersMenu=!1)},{default:y(()=>[m(U,{size:"30"},{default:y(()=>u[5]||(u[5]=[N("mdi-window-close")])),_:1})]),_:1})])]),_:1}),m(Ge),m(Be,{flat:"",style:{margin:"10px 5px 15px 5px"}},{default:y(()=>[(d(!0),g(G,null,ne(o.value.filter(v=>{var f;return[e(Ve).PLAYING,e(Ve).PAUSED].includes(v.state)||((f=e(k).queues[v.player_id])==null?void 0:f.items)>0&&v.powered!=!1}),v=>(d(),C(ct,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Se).SET_MEMBERS),onClick:f=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),m(Ul,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=v=>s.value=v),variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[m(la,{style:{padding:"0"}},{default:y(()=>[m(ia,null,{default:y(()=>[$("h3",null,I(c.$t("all_players")),1)]),_:1}),m(oa,{style:{padding:"0"}},{default:y(()=>[m(Be,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(G,null,ne(o.value.filter(v=>v.type!=e($e).GROUP),v=>(d(),C(ct,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Se).SET_MEMBERS),onClick:f=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1}),o.value.filter(v=>v.type==e($e).GROUP).length?(d(),C(la,{key:0,style:{padding:"0"}},{default:y(()=>[m(ia,null,{default:y(()=>[$("h3",null,I(c.$t("all_groups")),1)]),_:1}),m(oa,{style:{padding:"0"}},{default:y(()=>[m(Be,{flat:"",style:{margin:"-20px 3px 5px 3px"}},{default:y(()=>[(d(!0),g(G,null,ne(o.value.filter(v=>v.type==e($e).GROUP),v=>(d(),C(ct,{id:v.player_id,key:v.player_id,player:v,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":i.value&&v.player_id==e(a).activePlayerId,"show-sync-controls":v.supported_features.includes(e(Se).SET_MEMBERS),onClick:f=>n(v)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1})]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])):P("",!0)],64))}}),Ps=de(ks,[["__scopeId","data-v-feb6fca2"]]);function Cs(t={}){const{immediate:i=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:r}=t;let c,u,v;const f=async(p=!0)=>{await u,v==null||v()};async function h(){if("serviceWorker"in navigator){if(c=await Ql(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:p}},[],import.meta.url).then(({Workbox:p})=>new p("./sw.js",{scope:"./",type:"classic"})).catch(p=>{r==null||r(p)}),!c)return;v=()=>{c==null||c.messageSkipWaiting()};{let p=!1;const _=()=>{p=!0,c==null||c.addEventListener("controlling",w=>{w.isUpdate&&window.location.reload()}),s==null||s()};c.addEventListener("installed",w=>{typeof w.isUpdate>"u"?typeof w.isExternal<"u"&&w.isExternal?_():!p&&(o==null||o()):w.isUpdate||o==null||o()}),c.addEventListener("waiting",_)}c.register({immediate:i}).then(p=>{l?l("./sw.js",p):n==null||n(p)}).catch(p=>{r==null||r(p)})}}return u=h(),f}function Is(t={}){const{immediate:i=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:l,onRegisterError:r}=t,c=A(!1),u=A(!1);return{updateServiceWorker:Cs({immediate:i,onNeedRefresh(){c.value=!0,s==null||s()},onOfflineReady(){u.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:l,onRegisterError:r}),offlineReady:u,needRefresh:c}}const Vs={key:0,class:"pwa-toast",role:"alert"},Ss={class:"message"},$s={key:0},Qs={key:1},Ts=Y({__name:"ReloadPrompt",setup(t){const{offlineReady:i,needRefresh:s,updateServiceWorker:o}=Is(),n=async()=>{i.value=!1,s.value=!1};return(l,r)=>e(i)||e(s)?(d(),g("div",Vs,[$("div",Ss,[e(i)?(d(),g("span",$s," App ready to work offline ")):(d(),g("span",Qs," New content available, click on reload button to update. "))]),e(s)?(d(),g("button",{key:0,onClick:r[0]||(r[0]=c=>e(o)())},"Reload")):P("",!0),$("button",{onClick:n},"Close")])):P("",!0)}}),Ms=ge({...Ee(),...Al({fullHeight:!0}),...et()},"VApp"),Bs=_e()({name:"VApp",props:Ms(),setup(t,i){let{slots:s}=i;const o=ot(t),{layoutClasses:n,getLayoutItem:l,items:r,layoutRef:c}=El(t),{rtlClasses:u}=bt();return be(()=>{var v;return m("div",{ref:c,class:["v-application",o.themeClasses.value,n.value,u.value,t.class],style:[t.style]},[m("div",{class:"v-application__wrap"},[(v=s.default)==null?void 0:v.call(s)])])}),{getLayoutItem:l,items:r,theme:o}}}),Es=Y({__name:"Default",setup(t){const i=Tl();return ie([()=>i.query.player,()=>Object.keys(k.players).length],([s])=>{var l;if(!s)return;const o=s.toString().toLowerCase(),n=(l=Object.values(k.players).find(r=>r.player_id.toLowerCase()===o||r.display_name.toLowerCase()===o))==null?void 0:l.player_id;n&&(a.activePlayerId=n)},{immediate:!0}),ie(()=>i.query.showFullscreenPlayer,s=>{a.showFullscreenPlayer=!!s},{immediate:!0}),ie(()=>i.query.frameless,s=>{s&&(a.frameless=!0)},{immediate:!0}),(s,o)=>(d(),g(G,null,[e(a).connected?(d(),C(Bs,{key:0},{default:y(()=>[e(a).frameless?(d(),C(ra,{key:0})):(d(),g(G,{key:1},[m(Ps),m(as),m(ra)],64))]),_:1})):(d(),C(Ia,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(a).connected},{default:y(()=>[$("div",null,[m(Wl,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(a).isInStandaloneMode?(d(),C(Ts,{key:2})):P("",!0)],64))}}),Zs=de(Es,[["__scopeId","data-v-33a00054"]]);export{Zs as default};
