[project]
name = "odin-stream"
version = "0.1.0"
description = "A libary to create datastreams of ODIN objects"
requires-python = ">=3.10,<4.0"
authors = [{ name = "Floris vernieuwe", email = "floris@vernieuwe.eu" }]
readme = "README.md"
dependencies = []
license-files = ["LICENSE"]

[dependency-groups]
dev = [
  "scikit-build-core[pyproject]>=0.10.7,<0.11.0",
  "nanobind>=2.5.0,<3.0.0",
  "pytest>=8.3.4,<9.0.0",
  "pytest-cov>=6.0.0,<7.0.0",
  "pytest-benchmark>=5.1.0,<6.0.0",
]
[project.optional-dependencies]


[build-system]
requires = ["scikit-build-core>=0.10", "nanobind>=1.3.2"]
build-backend = "scikit_build_core.build"

[tool.scikit-build]
minimum-version = "build-system.requires"
cmake.build-type = "Debug"
cmake.args = ["-DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCOVERAGE=ON"]
build-dir = "build/{wheel_tag}"
wheel.py-api = "cp312"


[tool.cibuildwheel]
# Necessary to see build output from the actual compilation
build-verbosity = 1

# Run pytest to ensure that the package was correctly built
# test-command = "pytest test"
# test-requires = "pytest"

# Don't test Python 3.8 wheels on macOS/arm64
test-skip = "cp38-macosx_*:arm64"

# Needed for full C++17 support
[tool.cibuildwheel.macos.environment]
MACOSX_DEPLOYMENT_TARGET = "10.14"
