"use strict";(self.webpackChunk_optm_jupyter_optmwidgets=self.webpackChunk_optm_jupyter_optmwidgets||[]).push([[509],{50:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},237:e=>{var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},318:e=>{var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var s={},r=[],a=0;a<e.length;a++){var l=e[a],d=n.base?l[0]+n.base:l[0],c=s[d]||0,h="".concat(d," ").concat(c);s[d]=c+1;var u=i(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var m=o(p,n);n.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}r.push(h)}return r}function o(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,o){var s=n(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<s.length;r++){var a=i(s[r]);t[a].references--}for(var l=n(e,o),d=0;d<s.length;d++){var c=i(s[d]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=l}}},330:e=>{e.exports=JSON.parse('{"name":"@optm/jupyter-optmwidgets","version":"0.1.1","description":"Jupyter Widgets for DIVE virtual learning environment.","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/chiwangso2/optmwidgets","bugs":{"url":"https://github.com/chiwangso2/optmwidgets/issues"},"license":"BSD-3-Clause","author":{"name":"OPT Mentor"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/chiwangso2/optmwidgets"},"scripts":{"build":"jlpm run build:lib && jlpm run build:nbextension:dev && jlpm run build:labextension:dev","build:prod":"jlpm run build:lib && jlpm run build:nbextension && jlpm run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:nbextension:dev":"webpack --mode=development","clean":"jlpm run clean:lib && jlpm run clean:nbextension && jlpm run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf optmwidgets/labextension","clean:nbextension":"rimraf optmwidgets/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"jlpm run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@codemirror/autocomplete":"^6.1.0","@codemirror/commands":"^6.0.1","@codemirror/lang-html":"^6.1.0","@codemirror/lang-javascript":"^6.0.2","@codemirror/language":"^6.2.1","@codemirror/lint":"^6.0.0","@codemirror/search":"^6.0.1","@codemirror/state":"^6.1.0","@codemirror/theme-one-dark":"^6.0.0","@codemirror/view":"^6.1.1","@jupyter-widgets/base":"^1.1.10 || ^2.0.0 || ^3.0.0 || ^4.0.0"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyterlab/builder":"^4.3.5","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/jest":"^28.1.6","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~5.0.4","webpack":"^5.61.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":true,"outputDir":"optmwidgets/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}},"publishConfig":{"access":"public"}}')},495:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},509:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(797),t),o(i(885),t)},511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.editorSetup=t.EditorView=void 0;const n=i(24);var o=i(24);Object.defineProperty(t,"EditorView",{enumerable:!0,get:function(){return o.EditorView}});const s=i(195),r=i(84),a=i(661),l=i(529),d=i(445),c=i(86),h=i(826),u=(()=>[(0,n.lineNumbers)(),(0,n.highlightActiveLineGutter)(),(0,n.highlightSpecialChars)(),(0,a.history)(),(0,r.foldGutter)(),(0,n.drawSelection)(),(0,n.dropCursor)(),s.EditorState.allowMultipleSelections.of(!0),(0,r.indentOnInput)(),(0,r.syntaxHighlighting)(r.defaultHighlightStyle,{fallback:!0}),(0,r.bracketMatching)(),(0,d.closeBrackets)(),(0,d.autocompletion)(),(0,n.rectangularSelection)(),(0,n.crosshairCursor)(),(0,n.highlightActiveLine)(),(0,l.highlightSelectionMatches)(),n.keymap.of([{key:"Alt-Mod-z",run:a.undo,preventDefault:!0},{key:"Alt-Mod-y",mac:"Alt-Mod-Shift-z",run:a.redo,preventDefault:!0},{linux:"Alt-Ctrl-Shift-z",run:a.redo,preventDefault:!0},{key:"Alt-Ctrl-Tab",run:a.indentMore,preventDefault:!0},{key:"Alt-Ctrl-Shift-Tab",run:a.indentLess,preventDefault:!0},...d.closeBracketsKeymap,...a.defaultKeymap,...l.searchKeymap,...a.historyKeymap,...r.foldKeymap,...d.completionKeymap,...c.lintKeymap]),h.oneDark])();t.editorSetup=u},551:e=>{e.exports=function(e){return e[1]}},780:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(551),o=i.n(n),s=i(992),r=i.n(s)()(o());r.push([e.id,".tab-container {\n  display: none;\n  flex-direction: row;\n  overflow: hidden;\n}\n\n.output-container {\n  resize: both;\n  overflow: auto;\n  max-width: 100%;\n  border: none;\n  padding: 0;\n}\n\n.output-container > iframe {\n  border: none;\n}\n\n.editor-container {\n  resize: both;\n  overflow: auto;\n  max-width: 100%;\n  border: none;\n}\n\n.tab-container > div {\n  padding: 6px 6px;\n  margin: 2px;\n  background-color:lightgray;\n  display: block; \n  overflow: hidden;\n  border: none;\n  color: grey;\n}\n\n.tab-container > div.active-tab {\n  background-color:grey;\n  color: yellow;\n}\n",""]);const a=r},797:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const n=i(330);t.MODULE_VERSION=n.version,t.MODULE_NAME=n.name},862:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},879:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,o&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},885:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OPTMWidgetView=t.OPTMWidgetModel=t.JSWidgetView=t.JSWidgetModel=void 0;const n=i(470),o=i(797);i(890);const s=i(24),r=i(511),a=i(195),l=i(990),d=i(13);class c extends n.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"JSWidgetModel",_view_name:"JSWidgetView",_model_module:o.MODULE_NAME,_model_module_version:o.MODULE_VERSION,_view_module:o.MODULE_NAME,_view_module_version:o.MODULE_VERSION,js:"// some code here",html:"\x3c!-- some code here --\x3e",height:600,width:600})}}c.serializers=Object.assign({},n.DOMWidgetModel.serializers),t.JSWidgetModel=c;class h extends n.DOMWidgetView{render(){const e=s.keymap.of([{key:"Ctrl-Enter",run:(()=>(this.run(),!0)).bind(this)},{key:"Alt-Shift-Enter",run:(()=>(this.run(),!0)).bind(this)}]);this.jsTab=document.createElement("div"),this.htmlTab=document.createElement("div"),this.jsTab.innerHTML="JS",this.htmlTab.innerHTML="HTML",this.jsTab.classList.add("active-tab"),this.tabContainer=document.createElement("div"),this.tabContainer.className="tab-container",this.jsTab.onclick=(()=>{this.htmlTab.classList.remove("active-tab"),this.jsTab.classList.add("active-tab"),this.htmlContainer.style.display="none",this.jsContainer.style.display="block"}).bind(this),this.htmlTab.onclick=(()=>{this.htmlTab.classList.add("active-tab"),this.jsTab.classList.remove("active-tab"),this.htmlContainer.style.display="block",this.jsContainer.style.display="none"}).bind(this),this.tabContainer.appendChild(this.jsTab),this.tabContainer.appendChild(this.htmlTab),this.jsContainer=document.createElement("div"),this.jsContainer.className="js-container",this.jsContainer.style.display="block",this.jsView=new s.EditorView({state:a.EditorState.create({doc:this.model.get("js"),extensions:[r.editorSetup,e,(0,l.javascript)()]}),parent:this.jsContainer}),this.htmlContainer=document.createElement("div"),this.htmlContainer.className="html-container",this.htmlContainer.style.display="none",this.htmlView=new s.EditorView({state:a.EditorState.create({doc:this.model.get("html"),extensions:[r.editorSetup,e,(0,d.html)()]}),parent:this.htmlContainer}),this.editorContainer=document.createElement("div"),this.editorContainer.style.display="none",this.editorContainer.className="editor-container",this.editorContainer.appendChild(this.jsContainer),this.editorContainer.appendChild(this.htmlContainer);let t=e=>{if((e.metaKey||e.ctrlKey)&&!e.altKey&&!e.shiftKey&&"KeyZ"===e.code||(e.metaKey||e.ctrlKey)&&!e.altKey&&!e.shiftKey&&"KeyY"===e.code||(e.metaKey||e.ctrlKey)&&!e.altKey&&e.shiftKey&&"KeyZ"===e.code||!e.metaKey&&!e.ctrlKey&&!e.altKey&&e.shiftKey&&"Enter"===e.code||!e.metaKey&&!e.ctrlKey&&!e.altKey&&"Tab"===e.code){e.stopImmediatePropagation(),e.preventDefault();let t=new KeyboardEvent(e.type,{altKey:!0,code:e.code,ctrlKey:e.ctrlKey||"Tab"===e.code,isComposing:e.isComposing,repeat:e.repeat,metaKey:e.metaKey,shiftKey:e.shiftKey,key:e.key});e.target.dispatchEvent(t)}};this.editorContainer.addEventListener("focusin",(e=>{window.addEventListener("keydown",t,!0),console.log("in",e)}).bind(this)),this.editorContainer.addEventListener("focusout",(e=>{window.removeEventListener("keydown",t,!0),console.log("out",e)}).bind(this)),this.controlContainer=document.createElement("div"),this.controlContainer.className="control-container",this.controlContainer.style.display="flex",this.showBtn=document.createElement("button"),this.showBtn.innerText="scratch",this.showBtn.onclick=this.toggleCode.bind(this),this.runBtn=document.createElement("button"),this.runBtn.innerText="run code",this.runBtn.title="Shift-Enter",this.runBtn.onclick=this.run.bind(this),this.runBtn.style.display="none",this.controlContainer.appendChild(this.showBtn),this.controlContainer.appendChild(this.runBtn),this.outputContainer=document.createElement("div"),this.outputContainer.className="output-container",this.outputIFrame=document.createElement("iframe"),this.outputIFrame.height="100%",this.outputIFrame.width="100%",this.outputContainer.appendChild(this.outputIFrame),this.setHtml(),this.widgetContainer=document.createElement("div"),this.widgetContainer.className="divewidget",this.widgetContainer.appendChild(this.outputContainer),this.widgetContainer.appendChild(this.controlContainer),this.widgetContainer.appendChild(this.tabContainer),this.widgetContainer.appendChild(this.editorContainer),this.el.appendChild(this.widgetContainer)}run(){const e=this.htmlView.state.doc.toString(),t=this.jsView.state.doc.toString();this.model.set("html",e),this.model.set("js",t),this.model.save_changes()}setHtml(){this.outputIFrame.srcdoc=this.model.get("html"),this.outputIFrame.onload=function(){this.outputDocument=this.outputIFrame.contentDocument,this.jsScript=this.outputDocument.createElement("script"),this.outputDocument.body.appendChild(this.jsScript),this.setJs(),this.model.on("change:js",this.setJs,this),this.model.on("change:html",this.setHtml,this)}.bind(this)}setJs(){let e=this.outputDocument.createElement("script");e.innerHTML=`(function () {\n      ${this.model.get("js")}\n    })();`,this.outputDocument.body.replaceChild(e,this.jsScript),this.jsScript=e,this.outputContainer.style.height=(this.model.get("height")<0?this.outputDocument.body.scrollHeight:this.model.get("height"))+"px",this.outputContainer.style.width=(this.model.get("width")<0?this.outputDocument.body.scrollWidth:this.model.get("width"))+"px"}toggleCode(){"block"==this.editorContainer.style.display?(this.showBtn.innerText="scratch",this.tabContainer.style.display="none",this.editorContainer.style.display="none",this.runBtn.style.display="none"):(this.showBtn.innerText="hide code",this.tabContainer.style.display="flex",this.editorContainer.style.display="block",this.runBtn.style.display="block")}}t.JSWidgetView=h;class u extends n.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"JSWidgetModel",_view_name:"JSWidgetView",_model_module:o.MODULE_NAME,_model_module_version:o.MODULE_VERSION,_view_module:o.MODULE_NAME,_view_module_version:o.MODULE_VERSION,script:"# some code here",height:600,width:600})}}u.serializers=Object.assign({},n.DOMWidgetModel.serializers),t.OPTMWidgetModel=u;class p extends n.DOMWidgetView{render(){this.outputContainer=document.createElement("div"),this.outputContainer.className="output-container",this.outputIFrame=document.createElement("iframe"),this.outputIFrame.height="100%",this.outputIFrame.width="100%",this.outputContainer.appendChild(this.outputIFrame),this.setHtml(),this.widgetContainer=document.createElement("div"),this.widgetContainer.className="divewidget",this.widgetContainer.appendChild(this.outputContainer),this.el.appendChild(this.widgetContainer)}setHtml(){this.outputIFrame.src=this.model.get("srcprefix")+encodeURIComponent(this.model.get("script")),this.outputContainer.style.height=this.model.get("height")+"px",this.outputContainer.style.width=this.model.get("width")+"px"}}t.OPTMWidgetView=p},890:(e,t,i)=>{i.r(t),i.d(t,{default:()=>g});var n=i(318),o=i.n(n),s=i(879),r=i.n(s),a=i(237),l=i.n(a),d=i(862),c=i.n(d),h=i(50),u=i.n(h),p=i(495),m=i.n(p),b=i(780),y={};y.styleTagTransform=m(),y.setAttributes=c(),y.insert=l().bind(null,"head"),y.domAPI=r(),y.insertStyleElement=u(),o()(b.A,y);const g=b.A&&b.A.locals?b.A.locals:void 0},992:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,n,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var d=0;d<e.length;d++){var c=[].concat(e[d]);n&&r[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}}}]);