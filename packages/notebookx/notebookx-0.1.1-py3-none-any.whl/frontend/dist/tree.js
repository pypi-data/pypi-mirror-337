(()=>{"use strict";var e=function(e,t,n,o){return new(n||(n=Promise))((function(c,d){function i(e){try{r(o.next(e))}catch(e){d(e)}}function a(e){try{r(o.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}r((o=o.apply(e,t||[])).next())}))};function t(e){return new URLSearchParams(window.location.search).get(e)||""}function n(e,t){const n=document.getElementById("directory-container");if(!n)return;if(n.innerHTML="",n.className="directory-listing",t){const e=document.createElement("a"),o=t.split("/").filter(Boolean);o.pop();const c=o.join("/");e.href=`/?path=${encodeURIComponent(c)}`,e.textContent=".. (up)",e.className="up-link",n.appendChild(e),n.appendChild(document.createElement("br"))}const c=document.createElement("table");c.className="directory-table";const d=document.createElement("tr"),i=document.createElement("th"),a=document.createElement("input");a.type="checkbox",a.addEventListener("change",(()=>{r.forEach((e=>e.checked=a.checked)),o()})),i.appendChild(a),d.appendChild(i),["Name","Type","Size (KB)","Last Modified"].forEach((e=>{const t=document.createElement("th");t.textContent=e,d.appendChild(t)})),c.appendChild(d);const r=[];e.forEach((e=>{const n=document.createElement("tr"),d=document.createElement("td"),i=document.createElement("input");i.type="checkbox",i.dataset.filepath=t?`${t}/${e.name}`:e.name,i.addEventListener("change",o),r.push(i),d.appendChild(i),n.appendChild(d);const a=document.createElement("td"),l=document.createElement("a");if(e.isDir){const n=t?`${t}/${e.name}`:e.name;l.href=`/?path=${encodeURIComponent(n)}`,l.textContent=`[DIR] ${e.name}`,l.className="dir-link"}else{const n=t?`${t}/${e.name}`:e.name;l.href=`/open/${encodeURIComponent(n)}`,l.textContent=e.name,e.name.endsWith(".ipynb")?l.className="notebook-link":l.className="file-link"}a.appendChild(l),n.appendChild(a);const s=document.createElement("td");s.textContent=e.type||"unknown",n.appendChild(s);const p=document.createElement("td");p.textContent=e.size?(e.size/1024).toFixed(2):"-",n.appendChild(p);const m=document.createElement("td"),h=e.lastModified?new Date(1e3*e.lastModified).toLocaleString():"-";m.textContent=h,n.appendChild(m),c.appendChild(n)})),n.appendChild(c)}function o(){const e=document.getElementById("delete-button"),t=document.querySelectorAll('input[type="checkbox"]:checked');e.disabled=0===t.length}document.addEventListener("DOMContentLoaded",(()=>e(void 0,void 0,void 0,(function*(){const o=t("path");try{const e=yield fetch(`/api/files?path=${encodeURIComponent(o)}`);n((yield e.json()).children,o)}catch(e){console.error("Error loading directory:",e)}const c=document.getElementById("delete-button");c&&c.addEventListener("click",(()=>e(void 0,void 0,void 0,(function*(){const e=Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map((e=>e.dataset.filepath));if(0!==e.length&&confirm(`Are you sure you want to delete ${e.length} files?`))try{if(!(yield fetch("/api/delete_files",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:e})})).ok)throw new Error("Failed to delete files");location.reload()}catch(e){console.error("Error deleting files:",e),alert("Error deleting files")}}))))}))));document.addEventListener("DOMContentLoaded",(()=>{return e=void 0,o=void 0,d=function*(){const e=t("path");try{const t=yield fetch(`/api/files?path=${encodeURIComponent(e)}`);n((yield t.json()).children,e)}catch(e){console.error("Error loading directory:",e)}},new((c=void 0)||(c=Promise))((function(t,n){function i(e){try{r(d.next(e))}catch(e){n(e)}}function a(e){try{r(d.throw(e))}catch(e){n(e)}}function r(e){var n;e.done?t(e.value):(n=e.value,n instanceof c?n:new c((function(e){e(n)}))).then(i,a)}r((d=d.apply(e,o||[])).next())}));var e,o,c,d}))})();