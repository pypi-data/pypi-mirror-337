import{a4 as D,i as F,G as V,o as n,c as f,w as m,U as T,R as $,J as R,e as v,t as u,a as o,f as d,ag as j,b as G,V as N,S as q}from"./index-Bbkf9DIc.js";import{E as _}from"./EmailField-Dmv0bzOI.js";import{r as S,V as h}from"./VForm-BCtIZQOE.js";import{V as C}from"./VSwitch-MOiUeFZQ.js";import{V as O}from"./VSelect-0_bFDN-s.js";import{g as w}from"./index-CDn75bM3.js";import{V as E}from"./VTextField-Djz_9Wz9.js";import{V as J}from"./VTextarea-CCOY15Y4.js";import{V as L}from"./VChip-DoOT6ijG.js";const P={class:"m-label"},z={class:"m-label"},H={class:"m-label"},I={class:"m-label"},te={__name:"AliasGeneralForm",props:{modelValue:{type:Object,default:null}},setup(b,{expose:y}){const g=D(),i=b,e=F(()=>i.modelValue),k=F(()=>g.domains),s=V();function r(){e.value.address!=null&&navigator.clipboard.writeText(e.value.address)}async function p(){e.value.domain!=null&&j.getRandomAddress().then(t=>{e.value.address=`${t.data.address}@${e.value.domain.name}`})}return y({vFormRef:s}),(t,a)=>(n(),f(h,{ref_key:"vFormRef",ref:s},{default:m(()=>[e.value.pk?T("",!0):(n(),f(C,{key:0,modelValue:e.value.random,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.random=l),label:t.$gettext("Random address"),color:"primary"},null,8,["modelValue","label"])),e.value.random?(n(),$(R,{key:2},[v("label",z,u(t.$gettext("Domain")),1),o(O,{modelValue:e.value.domain,"onUpdate:modelValue":[a[2]||(a[2]=l=>e.value.domain=l),p],items:Object.values(k.value),"item-title":"name","return-object":"",variant:"outlined",density:"compact",rules:[d(S).required]},{append:m(()=>[o(w,{variant:"flat",icon:"mdi-reload",onClick:p})]),_:1},8,["modelValue","items","rules"]),o(E,{modelValue:e.value.address,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.address=l),label:t.$gettext("Generated address"),readonly:""},{"append-inner":m(()=>[o(w,{variant:"flat",icon:"mdi-clipboard-outline",onClick:r})]),_:1},8,["modelValue","label"])],64)):(n(),$(R,{key:1},[v("label",P,u(t.$gettext("Email address")),1),o(d(_),{ref:"address",modelValue:e.value.address,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.address=l),type:"email",variant:"outlined",density:"compact",rules:[d(S).required]},null,8,["modelValue","rules"])],64)),o(C,{modelValue:e.value.enabled,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.enabled=l),label:t.$gettext("Enabled"),color:"primary"},null,8,["modelValue","label"]),v("label",H,u(t.$gettext("Expire at")),1),o(E,{modelValue:e.value.expire,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.expire=l),variant:"outlined",density:"compact"},null,8,["modelValue"]),v("label",I,u(t.$gettext("Description")),1),o(J,{modelValue:e.value.description,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.description=l),rows:"2",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1},512))}},oe={__name:"AliasRecipientForm",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:model-value"],setup(b,{expose:y,emit:g}){const{$gettext:i}=G(),e=g,k=b,s=F({get:()=>k.modelValue,set:c=>e("update:model-value",c)}),r=V(""),p=V(),t=V();async function a(){s.value.push(r.value),r.value="",t.value.resetValidation()}function l(c){s.value.splice(c,1)}const B=[()=>s.value.length>0||i("Please add at least one recipient.")];return y({vFormRef:t}),(c,U)=>(n(),f(h,{ref_key:"vFormRef",ref:t},{default:m(()=>[o(d(_),{ref_key:"recipientField",ref:p,modelValue:r.value,"onUpdate:modelValue":U[0]||(U[0]=x=>r.value=x),placeholder:d(i)("Start typing a name here..."),hint:d(i)("Alias(es) of this mailbox. To create a catchall alias, just enter the domain name (@domain.tld)."),"persistent-hint":"","allow-add":"",rules:B,onDomainSelected:a},null,8,["modelValue","placeholder","hint"]),(n(!0),$(R,null,N(s.value,(x,A)=>(n(),f(L,{key:A,class:"mr-2 mt-2",closable:"","onClick:close":K=>l(A)},{default:m(()=>[q(u(x),1)]),_:2},1032,["onClick:close"]))),128))]),_:1},512))}};export{te as _,oe as a};
