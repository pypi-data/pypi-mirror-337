import{_ as ke}from"./DomainAdminList-CDdY7qlM.js";import{b as F,r as le,o as s,R as x,e as n,S as r,t as a,Q as re,a as t,w as e,J as O,V as te,f as o,G as _,aa as J,i as j,d as pe,k as ae,c as u,U as N,a9 as W,_ as se,a2 as ce,a3 as ue,a0 as ve,a4 as ye,N as we}from"./index-Bbkf9DIc.js";import{V as G}from"./VAvatar-CcSwNzJ2.js";import{V as fe,a as me}from"./VToolbar-BMyNQ6K-.js";import{V as ne}from"./VSpacer-CPtHAmtO.js";import{g as M}from"./index-CDn75bM3.js";import{a as R,c as z,V as X,b as ge}from"./VCard-DLgKmdoO.js";import{a as y,V as c}from"./VRow-DnWvWxV-.js";import{V as xe}from"./VSheet-DBaZUbyz.js";import{V as $e,a as Ve,b as De}from"./VExpansionPanels-C3Er6iaF.js";import{V as K}from"./VAlert-Da5j80B0.js";import{_ as Ce}from"./ConfirmDialog-DXHV8KLb.js";import{V as D}from"./VChip-DoOT6ijG.js";import{V as Me}from"./VDataTableVirtual-BU6jal2B.js";import{V as ie}from"./VDialog-CLTUldPN.js";import{_ as Se}from"./ResourcesForm-Duu6t3va.js";import{T as de}from"./TimeSerieChart-DNyBI3b_.js";import{V as Ie,a as Ne,b as Z,c as ee}from"./VTabs-DXxJe3KI.js";import"./VAutocomplete-BqJxkVxD.js";import"./VSelect-0_bFDN-s.js";import"./VTextField-Djz_9Wz9.js";import"./tag-BgJ4tZGv.js";import"./VProgressCircular-o4TPEeLK.js";import"./forwardRefs-zpUiuLw8.js";import"./ssrBoot-C8G7_1W2.js";import"./dimensions-CxFA8Z4w.js";import"./VMenu-pbjiSmmM.js";import"./filter-BVTKTv4O.js";/* empty css              */import"./VDataTable-BfFW1vg6.js";import"./VForm-BCtIZQOE.js";import"./VContainer-D7EM81q4.js";import"./VWindowItem-D5SUtcL1.js";const Te={base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"},Ke={base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"},Ae={base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"},Pe={base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"},Re={base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"},ze={base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"},Fe={base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"},Be={base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"},Oe={base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"},je={base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"},Ue={base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"},Ee={base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"},Ge={base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"},Le={base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"},qe={base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"},We={base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"},Xe={base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"},Ye={base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"},He={base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"},Qe={black:"#000000",white:"#ffffff",transparent:"#ffffff00"},L={red:Te,pink:Ke,purple:Ae,deepPurple:Pe,indigo:Re,blue:ze,lightBlue:Fe,cyan:Be,teal:Oe,green:je,lightGreen:Ue,lime:Ee,yellow:Ge,amber:Le,orange:qe,deepOrange:We,brown:Xe,blueGrey:Ye,grey:He,shades:Qe},Je={class:"text-h6"},Ze={width:"40%"},et=n("th",null,"SPF",-1),tt=n("th",null,"DKIM",-1),at={class:"text-white"},lt={class:"text-white"},nt={class:"text-white"},ot={class:"text-white"},q={__name:"DmarcSourceTable",props:{title:{type:String,default:""},color:{type:String,default:""},total:{type:Number,default:null},sources:{type:Object,default:null}},setup(i){const{$gettext:l}=F();return(b,h)=>{const d=le("v-simple-table");return s(),x("div",null,[n("div",Je,[r(a(i.title)+" ",1),n("span",{class:re(b.text-`${i.color}-lighten-2`)},a(i.total),3)]),t(d,null,{default:e(()=>[n("tbody",null,[(s(!0),x(O,null,te(i.sources,(m,f)=>(s(),x(O,{key:f},[n("tr",null,[n("th",Ze,a(f),1),n("th",null,a(o(l)("Total")),1),et,tt]),(s(!0),x(O,null,te(m,(v,k)=>(s(),x("tr",{key:k},[n("td",null,a(k),1),n("td",null,a(v.total),1),n("td",null,[t(G,{color:"green lighten-2",size:"24"},{default:e(()=>[n("span",at,a(v.spf.success),1)]),_:2},1024),t(G,{color:"red lighten-2 ml-1",size:"24"},{default:e(()=>[n("span",lt,a(v.spf.failure),1)]),_:2},1024)]),n("td",null,[t(G,{color:"green lighten-2",size:"24"},{default:e(()=>[n("span",nt,a(v.dkim.success),1)]),_:2},1024),t(G,{color:"red lighten-2 ml-1",size:"24"},{default:e(()=>[n("span",ot,a(v.dkim.failure),1)]),_:2},1024)])]))),128))],64))),128))])]),_:1})])}}},it={key:0},dt={class:"mx-2"},rt=n("br",null,null,-1),st={class:"text-subtitle-1"},ct={key:1},ut={__name:"DmarcAligmentChart",props:{domain:{type:Object,default:()=>null}},setup(i){const{$gettext:l}=F(),b=["aligned","trusted","forwarded","failed"],h=i,d=_({colors:[L.green.lighten2,L.orange.lighten2,L.blue.lighten2,L.red.lighten2],labels:[l("Fully aligned"),l("Partially aligned"),l("Forwarded"),l("Failed")],legend:{position:"bottom"}}),m=_(null),f=_([{key:"total",label:l("Total"),color:"primary lighten-2"},{key:"aligned",label:l("Fully aligned"),color:"green lighten-2"},{key:"trusted",label:l("Partially aligned"),color:"orange lighten-2"},{key:"forwarded",label:l("Forwarded"),color:"blue lighten-2"},{key:"failed",label:l("Failed"),color:"red lighten-2"}]),v=J.now(),k=_(v.year),g=_(v.weekNumber),w=_(!1),B=_(!1),E=_(null),A=_([]),S=_({}),Y=j(()=>J.fromObject({weekYear:k.value,weekNumber:g.value}).startOf("week")),I=j(()=>J.fromObject({weekYear:k.value,weekNumber:g.value}).endOf("week"));function p(P){let $="";for(const T of P.split(" "))$!==""&&($+=" "),$+="text-"+T;return $}function H(){g.value===52?(k.value+=1,g.value=1):g.value+=1}function C(){g.value===1?(k.value-=1,g.value=52):g.value-=1}function Q(){if(B.value)return;const P=`${k.value}-${g.value}`;B.value=!0,W.getDomainDmarcAlignment(h.domain.pk,P).then($=>{if(B.value=!1,$.status===204){w.value=!0;return}S.value={total:0},m.value=$.data,A.value=[];for(const T of b){let V=0;for(const oe in $.data[T])for(const _e in $.data[T][oe])V+=$.data[T][oe][_e].total;S.value.total+=V,S.value[T]=V,A.value.push(V)}})}return pe(()=>Q()),ae(g,()=>{Q()}),ae(k,()=>{Q()}),(P,$)=>{const T=le("apexchart");return m.value?(s(),x("div",it,[t(z,null,{default:e(()=>[t(fe,{dense:"",elevation:"0",class:"mr-2"},{default:e(()=>[t(me,null,{default:e(()=>[r(a(o(l)("Alignment")),1)]),_:1}),t(ne),t(M,{icon:"mdi-arrow-left",size:"x-small",onClick:C}),n("span",dt,a(Y.value.toLocaleString())+" - "+a(I.value.toLocaleString()),1),t(M,{icon:"mdi-arrow-right",size:"x-small",onClick:H})]),_:1}),t(R,null,{default:e(()=>[t(y,null,{default:e(()=>[t(c,{cols:"5"},{default:e(()=>[A.value?(s(),u(T,{key:0,type:"pie",height:"350",options:d.value,series:A.value},null,8,["options","series"])):N("",!0)]),_:1}),t(c,{cols:"7"},{default:e(()=>[t(y,null,{default:e(()=>[(s(!0),x(O,null,te(f.value,V=>(s(),u(c,{key:V.key,cols:"6"},{default:e(()=>[t(xe,{outlined:"",color:V.color,rounded:""},{default:e(()=>[t(z,{outlined:"",class:"pa-10 text-center"},{default:e(()=>[n("span",{class:re("text-h4 "+p(V.color))},a(S.value[V.key]),3),rt,n("span",st,a(V.label),1)]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(De,{modelValue:E.value,"onUpdate:modelValue":$[0]||($[0]=V=>E.value=V),class:"mt-2"},{default:e(()=>[t($e,{title:o(l)("Detail")},{default:e(()=>[t(Ve,null,{default:e(()=>[t(q,{title:o(l)("Trusted sources"),color:"green",total:S.value.aligned,sources:m.value.aligned},null,8,["title","total","sources"]),t(q,{title:o(l)("Partially trusted sources / Forwarders"),color:"orange",total:S.value.trusted,sources:m.value.trusted,class:"mt-4"},null,8,["title","total","sources"]),t(q,{title:o(l)("Forwarders with ARC"),color:"blue",total:S.value.forwarded,sources:m.value.forwarded,class:"mt-4"},null,8,["title","total","sources"]),t(q,{title:o(l)("Unknown sources / Threats"),color:"red",total:S.value.failed,sources:m.value.failed,class:"mt-4"},null,8,["title","total","sources"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])])):(s(),x("div",ct,[w.value?(s(),u(K,{key:0,type:"info",variant:"outlined",prominent:"",border:"start",class:"mt-6"},{default:e(()=>[n("div",null,a(o(l)("DMARC support does not seem to be enabled for this domain.")),1),n("div",null,a(o(l)("If you configured it recently, please wait for the first report to be received and processed.")),1)]),_:1})):N("",!0)]))}}},ft={id:"dkimdns",class:"dkim"},be={__name:"DKIMKeyViewer",props:{domain:{type:Object,default:null}},setup(i){const l=i,b=j(()=>{let d=`v=DKIM1;k=rsa;p=${l.domain.dkim_public_key}`;const m=[];for(;d.length>0;)if(d.length>74)m.push(`  "${d.substring(0,74)}"`),d=d.substring(74);else{m.push(`  "${d}"`);break}return m.join(`
`)});function h(){navigator.clipboard.writeText(document.getElementById("dkimdns").textContent)}return(d,m)=>(s(),x("button",{class:"dkimbutton",onClick:m[0]||(m[0]=f=>h())},[n("pre",ft,a(i.domain.dkim_key_selector)+"._domainkey."+a(i.domain.name)+". IN TXT ("+a(b.value)+`)
      }})`,1)]))}},mt={class:"headline"},gt={id:"dkimpub",class:"dkim"},bt={__name:"DomainDKIMKey",props:{domain:{type:Object,default:null}},emits:["close"],setup(i,{emit:l}){const{$gettext:b}=F(),h=l;function d(){navigator.clipboard.writeText(document.getElementById("dkimpub").textContent)}return(m,f)=>(s(),u(z,null,{default:e(()=>[t(X,null,{default:e(()=>[n("span",mt,a(o(b)("DKIM public key for"))+" "+a(i.domain.name),1)]),_:1}),t(R,null,{default:e(()=>[n("p",null,a(o(b)("Raw format. Click to copy")),1),t(K,{border:"start","colored-border":"","border-color":"primary lighten-3",elevation:"2",dense:""},{default:e(()=>[n("button",{class:"dkimbutton",onClick:f[0]||(f[0]=v=>d())},[n("pre",gt,a(i.domain.dkim_public_key),1)])]),_:1})]),_:1}),t(R,null,{default:e(()=>[n("p",null,a(o(b)("Bind/named format. Click to copy")),1),t(K,{border:"start","colored-border":"","border-color":"primary lighten-3",elevation:"2",dense:""},{default:e(()=>[t(be,{domain:i.domain},null,8,["domain"])]),_:1})]),_:1}),t(ge,null,{default:e(()=>[t(ne),t(M,{onClick:f[1]||(f[1]=v=>h("close"))},{default:e(()=>[r(a(o(b)("Close")),1)]),_:1})]),_:1})]),_:1}))}},U=i=>(ce("data-v-506783e1"),i=i(),ue(),i),ht={class:"text-subtitle-1 text-grey-darken-2 mb-4"},_t=U(()=>n("div",{class:"text-h6"},"MX",-1)),kt=U(()=>n("div",{class:"text-h6"},"SPF",-1)),pt=U(()=>n("pre",null,'@ IN TXT "v=spf1 mx ~all"',-1)),vt=U(()=>n("div",{class:"text-h6"},"DKIM",-1)),yt=U(()=>n("div",{class:"text-h6"},"DMARC",-1)),wt={class:"text-h6"},xt={__name:"DomainDNSConfig",props:{domain:{type:Object,default:null}},emits:["close"],setup(i,{emit:l}){const b=l;return(h,d)=>(s(),u(z,null,{default:e(()=>[t(X,{class:"text-h5"},{default:e(()=>[n("span",null,a(h.$gettext("DNS configuration for "))+" "+a(i.domain.name),1)]),_:1}),t(R,null,{default:e(()=>[n("p",ht,a(h.$gettext("Here is an example of DNS configuration (bind format). Replace values between [ ] by the appropriate ones.")),1),t(K,{class:"mb-4",border:"start","border-color":"primary lighten-3",elevation:"2",color:"white"},{default:e(()=>[_t,n("pre",null,[r("mail."+a(i.domain.name)+". IN A ",1),n("strong",null,"["+a(h.$gettext("IP address of your Modoboa server"))+"]",1),r(`
@ IN MX 10 mail.`+a(i.domain.name)+".",1)])]),_:1}),t(K,{class:"mb-4",border:"start","border-color":"primary lighten-3",elevation:"2",dense:"",color:"white"},{default:e(()=>[kt,pt]),_:1}),i.domain.enable_dkim&&i.domain.dkim_public_key?(s(),u(K,{key:0,class:"mb-4",border:"start","border-color":"primary lighten-3",elevation:"2",dense:"",color:"white"},{default:e(()=>[vt,t(be,{domain:i.domain},null,8,["domain"])]),_:1})):N("",!0),t(K,{class:"mb-4",border:"start","border-color":"primary lighten-3",elevation:"2",dense:"",color:"white"},{default:e(()=>[yt,n("pre",null,"_dmarc."+a(i.domain.name)+'. IN TXT "v=DMARC1; p=quarantine; pct=100;"',1)]),_:1}),t(K,{class:"mb-4",border:"start","border-color":"primary lighten-3",elevation:"2",dense:"",color:"white"},{default:e(()=>[n("div",wt,a(h.$gettext("Auto configuration")),1),n("pre",null,[r("autoconfig."+a(i.domain.name)+". IN CNAME ",1),n("strong",null,"["+a(h.$gettext("hostname of your automx server"))+"]",1),r(`
autodiscover.`+a(i.domain.name)+". IN CNAME ",1),n("strong",null,"["+a(h.$gettext("hostname of your automx server"))+"]",1)])]),_:1})]),_:1}),t(ge,null,{default:e(()=>[t(ne),t(M,{onClick:d[0]||(d[0]=m=>b("close"))},{default:e(()=>[r(a(h.$gettext("Close")),1)]),_:1})]),_:1})]),_:1}))}},$t=se(xt,[["__scopeId","data-v-506783e1"]]),Vt=n("span",null," DNS ",-1),Dt={class:"overline"},Ct={class:"overline"},Mt={key:4,class:"d-flex align-center flex-nowrap mt-4"},St={class:"text-subtitle-2"},It={class:"ml-6"},Nt={key:0},Tt={key:1},Kt={__name:"DNSDetail",props:{modelValue:{type:Object,default:null}},setup(i){const{$gettext:l}=F(),b=ve(),h=i,d=j(()=>h.modelValue),m=_(),f=_({}),v=_([{title:l("Name"),value:"name"},{title:l("Address"),value:"address"},{title:l("Updated"),value:"updated"}]),k=_(!1),g=_(!1),w=_(!1);function B(){navigator.clipboard.writeText(d.value.dkim_public_key),b.displayNotification({msg:l("DKIM key copied to clipboard"),type:"success"})}function E(){const I={dkim_private_key_path:""};W.patchDomain(d.value.pk,I).then(()=>{b.displayNotification({msg:l("A new key will be generated soon. Refresh the page in a moment to see it."),type:"success"}),d.value.dkim_private_key_path="",k.value=!1}).catch(()=>{k.value=!1})}function A(){k.value=!1}async function S(){k.value=!0,W.getDomainDNSDetail(d.value.pk).then(async I=>{f.value=I.data,await m.value.open(l("warning"),l("DKIM key does not seem to be generated yet or has failed. Do you want to requeue the job?"),{color:"warning",cancelLabel:l("No"),agreeLabel:l("Yes")})?E():A()})}function Y(){m.value.open(l("Warning"),l("DKIM keys already exist for this domain. Do you want to overwrite them?"),{color:"error",cancelLabel:l("No"),agreeLabel:l("Yes")})}return ae(d,I=>{I&&W.getDomainDNSDetail(I.pk).then(p=>{f.value=p.data})},{immediate:!0}),(I,p)=>{const H=le("translate");return d.value?(s(),u(z,{key:0},{default:e(()=>[t(X,null,{default:e(()=>[Vt,t(M,{class:"ml-2",icon:"mdi-information-outline",title:o(l)("DNS configuration help"),variant:"text",density:"compact",onClick:p[0]||(p[0]=C=>g.value=!0)},null,8,["title"])]),_:1}),t(R,null,{default:e(()=>[t(H,{class:"overline"},{default:e(()=>[r("MX records")]),_:1}),d.value.dns_global_status=="pending"?(s(),u(y,{key:0},{default:e(()=>[t(c,null,{default:e(()=>[t(D,{color:"info",size:"small"},{default:e(()=>[r(a(o(l)("Pending")),1)]),_:1})]),_:1})]),_:1})):(s(),u(Me,{key:1,headers:v.value,items:f.value.mx_records},{"item.updated":e(({item:C})=>[r(a(I.$date(C.updated)),1)]),_:2},1032,["headers","items"])),n("div",Dt,a(o(l)("Auto configuration")),1),d.value.dns_global_status=="pending"?(s(),u(y,{key:2},{default:e(()=>[t(c,null,{default:e(()=>[t(D,{color:"info",size:"small"},{default:e(()=>[r(a(o(l)("Pending")),1)]),_:1})]),_:1})]),_:1})):(s(),x(O,{key:3},[t(y,null,{default:e(()=>[t(c,null,{default:e(()=>[f.value.autoconfig_record?(s(),u(D,{key:0,color:"success"},{default:e(()=>[r(a(o(l)("autoconfig record (Mozilla): %{ value }",{value:f.value.autoconfig_record.value})),1)]),_:1})):(s(),u(D,{key:1,color:"warning"},{default:e(()=>[r(a(o(l)("autoconfig record (Mozilla) not found")),1)]),_:1}))]),_:1}),t(c,null,{default:e(()=>[f.value.autodiscover_record?(s(),u(D,{key:0,color:"success"},{default:e(()=>[r(a(o(l)("autodiscover record (Microsoft): %{ value }",{value:f.value.autodiscover_record.value})),1)]),_:1})):(s(),u(D,{key:1,color:"warning"},{default:e(()=>[r(a(o(l)("autodiscover record (Microsoft) not found")),1)]),_:1}))]),_:1})]),_:1}),n("div",Ct,a(o(l)("Authentication")),1),t(y,null,{default:e(()=>[t(c,null,{default:e(()=>[f.value.spf_record?(s(),u(D,{key:0,color:"success"},{default:e(()=>[r(a(o(l)("SPF record found")),1)]),_:1})):(s(),u(D,{key:1,color:"error"},{default:e(()=>[r(a(o(l)("SPF record not found")),1)]),_:1}))]),_:1}),t(c,null,{default:e(()=>[f.value.dkim_record?(s(),u(D,{key:0,color:"success"},{default:e(()=>[r(a(o(l)("DKIM record found")),1)]),_:1})):(s(),u(D,{key:1,color:"error"},{default:e(()=>[r(a(o(l)("DKIM record not found")),1)]),_:1}))]),_:1}),t(c,null,{default:e(()=>[f.value.dmarc_record?(s(),u(D,{key:0,color:"success"},{default:e(()=>[r(a(o(l)("DMARC record found")),1)]),_:1})):(s(),u(D,{key:1,color:"error"},{default:e(()=>[r(a(o(l)("DMARC record not found")),1)]),_:1}))]),_:1})]),_:1})],64)),d.value.enable_dkim?(s(),x("div",Mt,[n("div",St,a(o(l)("DKIM key")),1),n("div",It,[d.value.dkim_private_key_path&&d.value.dkim_public_key?(s(),x("div",Nt,[t(M,{color:"primary",size:"small",onClick:p[1]||(p[1]=C=>w.value=!0)},{default:e(()=>[r(a(o(l)("Show key")),1)]),_:1}),t(M,{icon:"mdi-content-copy",variant:"text",class:"ml-2",title:o(l)("Copy key to clipboard"),onClick:B},null,8,["title"]),t(M,{icon:"mdi-refresh",title:o(l)("Generate a new DKIM key"),variant:"text",loading:k.value,onClick:Y},null,8,["title","loading"])])):(s(),x("div",Tt,[r(a(o(l)("Not generated"))+" ",1),t(M,{icon:"mdi-reload",color:"primary",variant:"text",loading:k.value,onClick:S},null,8,["loading"])]))])])):N("",!0)]),_:1}),t(ie,{modelValue:g.value,"onUpdate:modelValue":p[3]||(p[3]=C=>g.value=C),"max-width":"800px",persistent:""},{default:e(()=>[t($t,{domain:d.value,onClose:p[2]||(p[2]=C=>g.value=!1)},null,8,["domain"])]),_:1},8,["modelValue"]),t(ie,{modelValue:w.value,"onUpdate:modelValue":p[5]||(p[5]=C=>w.value=C),"max-width":"800px",persistent:""},{default:e(()=>[t(bt,{domain:d.value,onClose:p[4]||(p[4]=C=>w.value=!1)},null,8,["domain"])]),_:1},8,["modelValue"]),t(Ce,{ref_key:"dialog",ref:m},null,512)]),_:1})):N("",!0)}}},At={class:"headline"},Pt={__name:"DomainSummary",props:{domain:{type:Object,default:null}},setup(i){const{$gettext:l}=F();return(b,h)=>i.domain?(s(),u(z,{key:0},{default:e(()=>[t(X,null,{default:e(()=>[n("div",At,a(o(l)("General information")),1)]),_:1}),t(R,null,{default:e(()=>[t(y,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[r(a(o(l)("Creation date")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[r(a(b.$date(i.domain.creation)),1)]),_:1})]),_:1}),t(y,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[r(a(o(l)("Last modification date")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[r(a(b.$date(i.domain.last_modification)),1)]),_:1})]),_:1}),t(y,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[r(a(o(l)("Quota")),1)]),_:1}),i.domain.quota==="0"?(s(),u(c,{key:0,cols:"6"},{default:e(()=>[r(a(o(l)("Unlimited")),1)]),_:1})):(s(),u(c,{key:1,cols:"6"},{default:e(()=>[r(a(i.domain.quota)+" "+a(o(l)("MB")),1)]),_:1}))]),_:1}),t(y,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[r(a(o(l)("Default mailbox quota")),1)]),_:1}),i.domain.default_mailbox_quota==="0"?(s(),u(c,{key:0,cols:"6"},{default:e(()=>[r(a(o(l)("Unlimited")),1)]),_:1})):(s(),u(c,{key:1,cols:"6"},{default:e(()=>[r(a(i.domain.default_mailbox_quota)+" MB",1)]),_:1}))]),_:1}),i.domain.message_limit!==void 0?(s(),u(y,{key:0},{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[r(a(o(l)("Daily sending limit")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[r(a(i.domain.message_limit)+" "+a(o(l)("messages")),1)]),_:1})]),_:1})):N("",!0),t(y,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[r(a(o(l)("Mailboxes")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[r(a(i.domain.mailbox_count),1)]),_:1})]),_:1}),t(y,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[r(a(o(l)("Aliases")),1)]),_:1}),t(c,{cols:"6"},{default:e(()=>[r(a(i.domain.mbalias_count),1)]),_:1})]),_:1})]),_:1})]),_:1})):N("",!0)}},he=i=>(ce("data-v-02b0908b"),i=i(),ue(),i),Rt=he(()=>n("div",{class:"mt-4"},null,-1)),zt=he(()=>n("div",{class:"mt-4"},null,-1)),Ft={__name:"DomainView",setup(i){const{$gettext:l}=F(),b=we(),h=ye(),d=j(()=>h.domains[b.params.id]!==void 0?h.domains[b.params.id]:(v(),{pk:b.params.id})),m=_({}),f=_(null);function v(){h.getDomain(b.params.id)}return(k,g)=>(s(),x("div",null,[t(fe,{flat:""},{default:e(()=>[t(me,null,{default:e(()=>[r(a(o(l)("Domain"))+" "+a(d.value.name)+" ",1),t(M,{color:"primary",icon:"mdi-circle-edit-outline",to:{name:"DomainEdit",params:{id:d.value.pk}}},null,8,["to"]),t(M,{color:"primary",icon:"mdi-reload",onClick:g[0]||(g[0]=w=>v())})]),_:1})]),_:1}),t(Ie,{modelValue:f.value,"onUpdate:modelValue":g[1]||(g[1]=w=>f.value=w),class:"mb-4",color:"primary"},{default:e(()=>[t(Z,null,{default:e(()=>[r(a(o(l)("General")),1)]),_:1}),t(Z,null,{default:e(()=>[r(a(o(l)("Statistics")),1)]),_:1}),t(Z,null,{default:e(()=>[r(a(o(l)("DMARC")),1)]),_:1})]),_:1},8,["modelValue"]),t(Ne,{modelValue:f.value,"onUpdate:modelValue":g[3]||(g[3]=w=>f.value=w)},{default:e(()=>[t(ee,null,{default:e(()=>[t(y,null,{default:e(()=>[t(c,{cols:"12",md:"6"},{default:e(()=>[t(Pt,{domain:d.value},null,8,["domain"]),Rt,t(ke,{domain:d.value},null,8,["domain"])]),_:1}),t(c,{cols:"12",md:"6"},{default:e(()=>[t(Kt,{modelValue:d.value,"onUpdate:modelValue":g[2]||(g[2]=w=>d.value=w)},null,8,["modelValue"]),zt,m.value.params&&m.value.params.enable_domain_limits&&d.value.resources&&d.value.resources.length?(s(),u(Se,{key:0,resources:d.value.resources},null,8,["resources"])):N("",!0)]),_:1})]),_:1})]),_:1}),t(ee,null,{default:e(()=>[t(y,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[d.value.name?(s(),u(de,{key:0,domain:d.value,"graphic-set":"mailtraffic","graphic-name":"averagetraffic"},null,8,["domain"])):N("",!0)]),_:1}),t(c,{cols:"12"},{default:e(()=>[d.value.name?(s(),u(de,{key:0,domain:d.value,"graphic-set":"mailtraffic","graphic-name":"averagetrafficsize"},null,8,["domain"])):N("",!0)]),_:1})]),_:1})]),_:1}),t(ee,null,{default:e(()=>[t(ut,{domain:d.value},null,8,["domain"])]),_:1})]),_:1},8,["modelValue"])]))}},ka=se(Ft,[["__scopeId","data-v-02b0908b"]]);export{ka as default};
